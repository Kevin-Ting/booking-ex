var _i_=this._i_||function(){},_r_=this._r_||function(t){return t};!function(){"use strict";_i_("8d1:3557c07a");var e="Atlas/";function i(t){return _i_("8d1:212232c8"),_r_(e+t)}function t(t,e){_i_("8d1:9d1725e1");var r=[].slice.call(arguments,0);return"string"==typeof t?r[0]=i(t):Array.isArray(t)?r[0]=t.map(i):Array.isArray(e)&&(r[1]=t.map(i)),_r_(B.require.apply(this,r))}B.atlas=B.atlas||{requirejs:t,require:t,define:function(t,e){_i_("8d1:6f103607");var r=[].slice.call(arguments,0);r[0]=i(t),Array.isArray(e)&&(r[1]=e.map(i)),B.define.apply(this,r),_r_()},getVariant:function(){return _i_("8d1:fa3ca699"),_r_(0)}},_r_()}(),B.atlas.define("jQuery",function(){return _i_("8d1:2b36fd1f"),_r_(B.require("jquery"))}),B.atlas.define("util-array",function(){"use strict";function o(t){if(_i_("8d1:9f857ed0"),!Array.isArray)return _r_("[object Array]"===Object.prototype.toString.call(t));return _r_(Array.isArray(t))}function i(t,e){var r,i;if(_i_("8d1:d4aa67c0"),!o(t))return _r_(-1);if(Array.prototype.findIndex)return _r_(t.findIndex(e));for(r=0,i=t.length;r<i;r++)if(e.call(t,t[r],r,t))return _r_(r);return _r_(-1)}return _i_("8d1:1a0a56d4"),_r_({each:function(t,i,n){var e,r;if(_i_("8d1:98f541e8"),!o(t))return _r_(t);if(t.forEach)t.forEach(function(t,e,r){_i_("8d1:864681d5"),i.call(n,t,e,r),_r_()});else for(e=0,r=t.length;e<r;++e)i.call(n,t[e],e,t);return _r_(t)},find:function(t,e){var r,i,n;if(_i_("8d1:e3968329"),!o(t))return _r_(n);if(Array.prototype.find)return _r_(t.find(e));for(r=0,i=t.length;r<i;r++)if(e.call(t,t[r],r,t))return _r_(t[r]);return _r_(n)},findIndex:i,isArray:o,contains:function(t,e){_i_("8d1:e7033692");var r=i(t,function(t){return _i_("8d1:24142508"),_r_(t===e)});return _r_(-1<r)},array_move:function(t,e,r){for(_i_("8d1:915d6bcb");e<0;)e+=t.length;for(;r<0;)r+=t.length;if(r>=t.length)for(var i=r-t.length+1;i--;)t.push(void 0);return t.splice(r,0,t.splice(e,1)[0]),_r_(t)}})}),B.atlas.define("util-getset",function(){"use strict";return _i_("8d1:9f4a205f"),_r_(function(r){_i_("8d1:2ab8a3a1"),this.set=function(t,e){if(_i_("8d1:d20d24cb"),t)return r[t]=e,_r_(e);return _r_(void 0)},this.get=function(t){return _i_("8d1:cc3a5c2d"),_r_(t?r[t]:void 0)},_r_()})}),B.atlas.define("util-object",function(){"use strict";_i_("8d1:a520c54e");var e=0;function _(t){_i_("8d1:32789e19");var e=typeof t;return _r_("function"===e||"object"===e&&!!t)}return _r_({extend:function(t){_i_("8d1:6f3dc761");var e,r,i,n,o=[].slice.call(arguments,0);if(!_(t))return _r_(t);for(i=1,n=o.length;i<n;++i)for(r in e=o[i])void 0!==e[r]&&(t[r]=e[r]);return _r_(t)},isObject:_,uniqueId:function(t){return _i_("8d1:85449ae4"),_r_(t?t+ ++e:++e+"")},simpleDiff:function t(e,r){if(_i_("8d1:e749e55a"),"object"!=typeof e||"object"!=typeof r)return _r_(!1);for(var i in e)if(!(i in r))return _r_(!0);for(var i in r)if(e[i]instanceof Object&&r[i]instanceof Object){if(t(e[i],r[i]))return _r_(!0)}else if(e[i]!==r[i])return _r_(!0);return _r_(!1)},deepClone:function(t){return _i_("8d1:acedc825"),_r_(JSON.parse(JSON.stringify(t)))}})}),B.define("atlas-core",function(n){"use strict";_i_("8d1:e09c4c52");var o=n("promise"),_=n("jstmpl"),a=n("server-data"),s=n("Atlas/pubsub"),r=n("Atlas/geo.bounds"),d=n("atlas-tools/state-utils"),e=n("atlas-tools/tracking"),i=n("atlas-tools/templates"),c=B.requirejs,l={center:[0,0],zoom:8};function u(t){if(_i_("8d1:9baeecd2"),t.reducers=t.reducers||[],t.components=t.components||[],!t.height||!t.width){var e=t.options.domNode.getBoundingClientRect();t.height=e.height,t.width=e.width}var r=Object.assign({center:t.options.center,zoom:t.options.zoom,height:t.height,width:t.width},t.initialAtlasState||{});t.reducers=t.reducers.concat([{module:n("atlas-components/atlas/atlas-reducer"),initialState:r},{module:n("atlas-components/markers/markers-reducer"),initialState:t.initialMarkersState},{module:n("atlas-components/env/env-reducer"),initialState:t.initialEnvState}]),t.components=t.components.concat([{module:n("atlas-components/atlas")}]),this.config=t,this.options=Object.assign({},l,t.options||{}),this.domNode=t.options.domNode,this.events=new s,this.extend(this.events);var i=this.initReducers(t.reducers);this.store=this.createStore(i),this.actions=this.createActions(i),this.id=t.id||"default",this.session_id=function(){_i_("8d1:ef40a665");var r=(new Date).getTime(),t="xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,function(t){_i_("8d1:1f2f7164");var e=(r+16*Math.random())%16|0;return r=Math.floor(r/16),_r_(("x"==t?e:3&e|8).toString(16))});return _r_(t)}(),this.get("debug")&&(this.logEvents(!0),B.atlas=B.atlas||{},B.atlas.map=this);try{n("fragment").call("geo.atlas_report_usage",{page_url:window.location.href,dom_node:JSON.stringify({classList:t.options.domNode.classList.toString(),id:t.options.domNode.getAttribute("id")})})}catch(t){}_r_()}return u.prototype.init=function(t){_i_("8d1:ebeb8914"),this.provider=t||u.PROVIDER_GOOGLE,this.zoomLevel=this.getZoom(),this.trigger(this.EVENTS.PRE_INIT),this.initExperiments(this.config.experiments),this.initTemplateHelpers(_,a);var r,e=new o(function(t){_i_("8d1:eeaf52fc"),this.once(this.EVENTS.TILES_LOAD,t),_r_()}.bind(this)),i=new o(function(t){_i_("8d1:8733e586"),this.once(this.EVENTS.MARKERS_READY,t),_r_()}.bind(this));switch(this.idlePromise=new o(function(t){_i_("8d1:2c87202e"),this.once(this.EVENTS.IDLE,t),_r_()}.bind(this)),o.all([e,i]).then(function(){_i_("8d1:96570875"),this.trigger(this.EVENTS.LOAD),_r_()}.bind(this)),this.trigger(this.EVENTS.API_BEFORE_LOAD),this.provider){case u.PROVIDER_LEAFLET:r=n("Atlas/provider-leaflet");break;case u.PROVIDER_GOOGLE:r=n("Atlas/provider-google")}return this.readyPromise=new o(function(e){_i_("8d1:8c91bfcf"),r.init(this,this.options,function(t){_i_("8d1:fdd0c282"),this.impl=t,this.Interface=t,this.initComponents(this.config.components),this.getPanes().then(function(t){_i_("8d1:e9bf9912"),this.initComponent(Object.assign({module:n("atlas-components/markers"),cacheContainer:t.markerLayer},this.config.markerOptions)),_r_()}.bind(this)),this.trigger(this.EVENTS.READY,this),e(this),_r_()}.bind(this)),_r_()}.bind(this)),this.on(this.EVENTS.ZOOM,function(t,e){_i_("8d1:d4e89fec"),this.zoomLevel<t?this.trigger(this.EVENTS.ZOOM_IN,t):this.zoomLevel>t&&this.trigger(this.EVENTS.ZOOM_OUT,t),this.zoomLevel=this.getZoom(),_r_()}.bind(this)),this.on(this.EVENTS.MARKERS_RENDERED,function(){_i_("8d1:bb184f41"),window.BUI&&window.BUI.initComponents(this.domNode),_r_()}.bind(this)),_r_(this.readyPromise)},u.prototype.initExperiments=function(t){if(_i_("8d1:b6547a07"),!t)return _r_();n("atlas-experiment-staging-helper").init(t,this),_r_()},u.prototype.initTemplateHelpers=function(t,e){if(_i_("8d1:9b019fd7"),!t||t.__atlasInst===this)return _r_();t.__atlasInst=this,Object.assign(t.fn,i.createJstmplHelpers(this,e||{})),_r_()},u.prototype.done=function(t){return _i_("8d1:b7af6d97"),_r_(this.readyPromise.then(t))},u.prototype.boundsReady=function(t){return _i_("8d1:1f7db0f2"),_r_(this.idlePromise.then(t))},u.prototype.initComponents=function(t){_i_("8d1:fa97f9d7"),t.forEach(this.initComponent.bind(this)),_r_()},u.prototype.initReducers=function(t){return _i_("8d1:ace508b0"),_r_(t.map(this.initReducer.bind(this)))},u.prototype.createActions=function(t){_i_("8d1:4e40e5b1");var i=this.store;return _r_(t.reduce(function(t,e){_i_("8d1:58200b21");var r=Object.keys(e).filter(function(t){return _i_("8d1:f18c4046"),_r_("function"==typeof e[t])});return _r_(Object.assign(t,d.createActions(i,r)))},{}))},u.prototype.extend=function(t){return _i_("8d1:a06d503a"),_r_(Object.assign(this,t))},u.prototype.createStore=function(t){_i_("8d1:5d83a3df");var e=d.combineReducersWithShallowCopy(t);return _r_(d.createStore(e))},u.prototype.initReducer=function(t){_i_("8d1:5f47860d");var e=t.name?c(t.name):t.module;return e.initialState&&t.initialState&&(e.initialState=Object.assign({},e.initialState,t.initialState)),_r_(e)},u.prototype.dispatch=function(t){return _i_("8d1:20bc65bd"),_r_(this.store.dispatch(t))},u.prototype.dispatchAction=function(){return _i_("8d1:d0b913a7"),_r_(d.dispatch.apply(d,[this].concat([].slice.call(arguments))))},u.prototype.subscribe=function(t){return _i_("8d1:b4ff7a8d"),_r_(this.store.subscribe(t))},u.prototype.replaceReducer=function(t){return _i_("8d1:5dc791f8"),_r_(this.store.replaceReducer(t))},u.prototype.initComponent=function(t){_i_("8d1:1e337d29");var e=t.name?c(t.name):t.module;if(!e)throw new Error("Can not initialize the component (wrong `name` or `module` is empty): "+t.name);var r=Object.assign({},t,{atlas:this,actions:this.actions,events:this.events});return"map"===r.container&&(r.container=this.getContainer()),r.placeholder||r.container?_r_(d.initComponent(this.store,e,r)):_r_(d.initModule(this.store,e,r))},u.prototype.getState=function(){return _i_("8d1:8ea1334b"),_r_(this.store.getState())},u.prototype.getCenter=function(){return _i_("8d1:f3e2d6a1"),_r_(this.getState().atlas.center)},u.prototype.getZoom=function(){return _i_("8d1:1315d36f"),_r_(this.getState().atlas.zoom)},u.prototype.getOffset=function(){return _i_("8d1:1112cb2a"),_r_(this.getState().atlas.offset)},u.prototype.getWidth=function(){return _i_("8d1:1493a957"),_r_(this.getState().atlas.width)},u.prototype.getHeight=function(){return _i_("8d1:6048980c"),_r_(this.getState().atlas.height)},u.prototype.resetMapView=function(){_i_("8d1:e8e28b78"),this.setCenter(this.options.center),this.setZoom(this.options.zoom),_r_()},u.prototype.get=function(t){return _i_("8d1:a30154e8"),_r_(this.getState().env[t])},u.prototype.set=function(){return _i_("8d1:c608e33c"),_r_(this.actions.set.apply(this,arguments))},u.prototype.replaceEnv=function(t){return _i_("8d1:fc1f9db1"),_r_(this.actions.replaceEnv(t))},u.prototype.getVariant=function(t){return _i_("8d1:4336da80"),_r_(e.getVariant(t,this.id,this.config.experiments))},u.prototype.coordsToPixels=function(t){return _i_("8d1:946ab524"),_r_(this.impl.coordsToPixels(t))},u.prototype.createPolygon=function(t){return _i_("8d1:c9aa204f"),_r_(n("atlas-tools/polygons").createPolygon(t,this.impl))},u.prototype.getBoundingBox=function(){return _i_("8d1:8e1b4e5d"),_r_(this.impl.getBoundingBox())},u.prototype.getBounds=function(){_i_("8d1:2fd47824");var t=new r,e=this.getBoundingBox();if(!e)throw new Error('Bounds are undefined, wait until "bounds-changed" event is fired before calling getBounds()');return t.setNorthEast(e.NE),t.setSouthWest(e.SW),_r_(t)},u.prototype.getPanes=function(){return _i_("8d1:cb508d18"),_r_(this.impl.getPanes())},u.prototype.getContainer=function(){return _i_("8d1:a5badd52"),_r_(this.impl.getContainer())},u.prototype.setZoom=function(){return _i_("8d1:57afcb4a"),_r_(this.actions.setZoom.apply(this,arguments))},u.prototype.setOffset=function(){return _i_("8d1:c1c59784"),_r_(this.actions.setOffset.apply(this,arguments))},u.prototype.setCenter=function(){_i_("8d1:185f887f");var e=arguments;return _r_(new o(function(t){return _i_("8d1:13aeb8db"),this.once(this.EVENTS.IDLE,t),_r_(this.actions.setCenter.apply(this,e))}.bind(this)))},u.prototype.setBounds=function(){return _i_("8d1:7ab44c1c"),_r_(this.actions.setBounds.apply(this,arguments))},u.prototype.panBy=function(t,e){return _i_("8d1:88a653ef"),_r_(this.impl.panBy(t,e))},u.prototype.panTo=function(t,e){return _i_("8d1:49b8567f"),_r_(this.impl.panTo(t,this._arrayToPoint(e)))},u.prototype.resize=function(){return _i_("8d1:55a6ba1b"),_r_(this.impl.resize())},u.prototype.fitBounds=function(e,r){return _i_("8d1:dcaf120c"),_r_(new o(function(t){_i_("8d1:3c28d7cd"),this.impl.fitBounds(e,r),this.once(this.EVENTS.IDLE,t),_r_()}.bind(this)))},u.prototype.updateAtlasState=function(){return _i_("8d1:18a7930e"),_r_(this.actions.updateAtlasState.apply(this,arguments))},u.prototype.updateMapDimensions=function(){return _i_("8d1:8237f895"),_r_(this.actions.updateMapDimensions.apply(this,arguments))},u.prototype._createMarker=function(t){return _i_("8d1:15ead750"),_r_(this.impl.createMarker(t))},u.prototype._removeMarker=function(t){return _i_("8d1:2f737f00"),_r_(this.impl.clearMarker(t))},u.prototype._removeAllMarkers=function(){return _i_("8d1:ce10c384"),_r_(this.impl.clearMarkers())},u.prototype._updateMarker=function(t,e){_i_("8d1:265a941a");var r=this.impl.getMarker(t);r&&r.customUpdate&&r.customUpdate(e),_r_()},u.prototype._arrayToPoint=function(t){return _i_("8d1:1421c603"),_r_({x:t[0],y:t[1]})},u.prototype._setCenter=function(t,e){return _i_("8d1:d2d4e72f"),_r_(this.impl.setCenter(t,this._arrayToPoint(e)))},u.prototype._getCenter=function(){return _i_("8d1:7497edba"),_r_(this.impl.getCenter())},u.prototype._setZoom=function(t){return _i_("8d1:c494c064"),_r_(this.impl.setZoom(t))},u.prototype._getZoom=function(){return _i_("8d1:00510127"),_r_(this.impl.getZoom())},u.prototype.openIW=function(){return _i_("8d1:43569624"),_r_(this.actions.openIW.apply(this,arguments))},u.prototype.closeIW=function(){return _i_("8d1:5db7e16b"),_r_(this.actions.closeIW.apply(this,arguments))},u.prototype.updateIWState=function(){return _i_("8d1:9c445d41"),_r_(this.actions.updateIWState.apply(this,arguments))},u.prototype.getIWState=function(t){return _i_("8d1:b83083c7"),_r_(this.getState().iws[t])},u.prototype.addMarkers=function(t){return _i_("8d1:fb0ea16a"),_r_(this.actions.addMarkers.call(this,t))},u.prototype.getMarkers=function(){return _i_("8d1:f18547ff"),_r_(this.getState().markers.markers)},u.prototype.getMarkersInBounds=function(e,r){_i_("8d1:df3136ac"),r=r||this.getBounds();var i=[];return this.getState().markers.markers.forEach(function(t){_i_("8d1:c363a197"),e&&e!==t.b_basic_type||!r.contains([t.b_latitude,t.b_longitude])||i.push(t),_r_()}),_r_(i)},u.prototype.getMarker=function(t){return _i_("8d1:4365aeb1"),_r_(this.getState().markers.markers.get(t))},u.prototype.getCurrentMarker=function(){_i_("8d1:d3ace237");var t=this.getMarkersByState("current");return _r_(0!==t.length?t[0]:null)},u.prototype.getMarkersByState=function(e){_i_("8d1:327625ef");var t=this.getState().markers.markers,r=[];return t.forEach(function(t){_i_("8d1:dc1d838b"),t.b_states[e]&&r.push(t),_r_()}),_r_(r)},u.prototype.getMarkersByType=function(e){_i_("8d1:19f405ac");var t=this.getState().markers.markers,r=[];return t.forEach(function(t){_i_("8d1:91fdad55"),t.b_basic_type===e&&r.push(t),_r_()}),_r_(r)},u.prototype.updateMarker=function(t,e,r){return _i_("8d1:b8e26eae"),_r_(this.actions.updateMarker.call(this,t,e,r))},u.prototype.updateMarkerStates=function(t,e){return _i_("8d1:67eb318b"),_r_(this.actions.updateMarkerStates.call(this,t,e))},u.prototype.removeMarkers=function(){return _i_("8d1:2d799855"),_r_(this.actions.removeMarkers.apply(this,arguments))},u.prototype.removeAllMarkers=function(){return _i_("8d1:ee58698b"),_r_(this.actions.removeAllMarkers.apply(this,arguments))},u.prototype.resetMarkers=function(){return _i_("8d1:3758bf0e"),_r_(this.actions.resetMarkers.apply(this,arguments))},u.prototype.resetActiveMarkers=function(){return _i_("8d1:56c78651"),_r_(this.actions.resetActiveMarkers.apply(this,arguments))},u.prototype.resetMarkersByState=function(t){return _i_("8d1:ef1c3641"),_r_(this.actions.resetMarkersByState.call(this,t))},u.prototype.jstmpl=function(t){return _i_("8d1:d823f98e"),this.initTemplateHelpers(_,a),_r_(_(t))},u.prototype.getPolygons=function(){return _i_("8d1:124fc07f"),_r_(this.getState().polygons||[])},u.prototype.getPolygonsByName=function(i){_i_("8d1:349bce44");var n=this.getState().polygons;return _r_(Object.keys(n).reduce(function(t,e){_i_("8d1:0ebe72c0");var r=n[e];return r&&r.name===i&&t.push(r),_r_(t)},[]))},u.prototype.polyLine=function(t){return _i_("8d1:4dbea33f"),_r_(this.impl.polyLine(t))},u.PROVIDER_LEAFLET="provider-leaflet",u.PROVIDER_GOOGLE="provider-google",u.PROVIDER_MAPBOX_GL="provider-mapbox-gl",u.geo={Bounds:n("Atlas/geo.bounds"),View:n("Atlas/geo.view"),LatLng:n("Atlas/geo.latLng"),projection:n("Atlas/geo.projection"),Point:n("Atlas/geometry.point")},u.tools={markers:n("atlas-tools/markers"),MarkersLoader:n("atlas-tools/markers-loader"),trackFPS:n("atlas-tools/track-fps"),polygons:n("atlas-tools/polygons")},u.prototype.geo=u.geo,u.prototype.tools=u.tools,_r_(u)}),B.define("Atlas/goals",function(t){"use strict";_i_("8d1:eba18ac8");var r,n=t("server-data"),i=t("squeak"),o={};function e(t,e){if(_i_("8d1:a7e199f2"),!e||!r)return _r_(!1);if(t(e,r))return r=e,_r_(!0);_r_()}var _=e.bind(null,function(t,e){return _i_("8d1:80deb7cf"),_r_(e<t)}),a=e.bind(null,function(t,e){return _i_("8d1:9937d3fe"),_r_(t<e)});function s(t,e){return _i_("8d1:2ee49858"),_r_(o[t]>=e)}function d(e){return _i_("8d1:31b724d4"),_r_(Object.keys(o).every(function(t){return _i_("8d1:3f4ec7cf"),_r_(!0===e[t])}))}function c(t,e,r){return _i_("8d1:c4775e65"),e[t+r]=!0,_r_(e)}function l(t,e){if(_i_("8d1:e9936a13"),!B.et||!B.et.goal)return _r_();if(e.filter&&!e.filter(t))return _r_();var r=n.map_open_sr_hp_squeaks||{};!r.mapOpenInSearchResultsOrHotelPage||"cn"!==n.b_guest_country||"atlas_sr_open"!==e.name&&"atlas_hp_open"!==e.name||i(r.mapOpenInSearchResultsOrHotelPage),B.et.goal(e.name),o[e.name]=(o[e.name]||0)+1,_r_()}return _r_({init:function(e){_i_("8d1:9cf385cb"),r=e.atlas.getZoom(),e.atlas.on(e.atlas.EVENTS.LOAD,function(){_i_("8d1:74a4b7e1"),r=e.atlas.getZoom(),_r_()}),function(r){_i_("8d1:0442a037");var t=["open","close","bounce","hover_bounce","no_results_in_view"].reduce(c.bind(null,r.prefix),{}),e=["hover_ufi","hover_property","hover_airport"].reduce(c.bind(null,r.prefix),{}),i=Object.assign({},t,e);return _r_([{evt:r.atlas.EVENTS.READY,name:r.prefix+"open"},{evt:r.atlas.EVENTS.CLOSE,name:r.prefix+"close"},{evt:r.atlas.EVENTS.CLOSE,name:r.prefix+"bounce",filter:function(){return _i_("8d1:928f40b6"),_r_(d(t))}},{evt:r.atlas.EVENTS.CLOSE,name:r.prefix+"hover_bounce",filter:function(){return _i_("8d1:0818d126"),_r_(d(i))}},{evt:r.atlas.EVENTS.DRAG_START,name:r.prefix+"panned_level_1",filter:s.bind(null,r.prefix+"panned",15)},{evt:r.atlas.EVENTS.DRAG_START,name:r.prefix+"panned_level_2",filter:s.bind(null,r.prefix+"panned",30)},{evt:r.atlas.EVENTS.FILTERS_APPLIED,name:r.prefix+"map_filter",condition:"searchresults"===r.action},{evt:r.atlas.EVENTS.DRAG_START,name:r.prefix+"panned"},{evt:r.atlas.EVENTS.MARKER_CLICK,name:r.prefix+"click_property",filter:function(t){return _i_("8d1:7a4787b8"),_r_(/hotel/.test(t.type))}},{evt:r.atlas.EVENTS.MARKER_CLICK,name:r.prefix+"click_ufi",filter:function(t){return _i_("8d1:0d53fe1b"),_r_(/city/.test(t.type))}},{evt:r.atlas.EVENTS.MARKER_CLICK,name:r.prefix+"click_airport",condition:"searchresults"===r.action,filter:function(t){return _i_("8d1:ce18f1b4"),_r_(/airport/.test(t.type))}},{evt:r.atlas.EVENTS.MARKER_CLICK,name:r.prefix+"current_property_click",condition:"hotel"===r.action,filter:function(t){return _i_("8d1:736dd810"),_r_("hotel_current"===t.type)}},{evt:r.atlas.EVENTS.MARKER_CLICK,name:r.prefix+"click_property_level_1",filter:s.bind(null,r.prefix+"click_property",5)},{evt:r.atlas.EVENTS.MARKER_CLICK,name:r.prefix+"click_property_level_2",filter:s.bind(null,r.prefix+"click_property",10)},{evt:r.atlas.EVENTS.MARKER_CLICK,name:r.prefix+"click_property_level_3",filter:s.bind(null,r.prefix+"click_property",15)},{evt:r.atlas.EVENTS.MARKER_HOVER,name:r.prefix+"hover_property",filter:function(t){return _i_("8d1:7a4787b81"),_r_(/hotel/.test(t.type))}},{evt:r.atlas.EVENTS.MARKER_HOVER,name:r.prefix+"hover_ufi",filter:function(t){return _i_("8d1:0d53fe1b1"),_r_(/city/.test(t.type))}},{evt:r.atlas.EVENTS.MARKER_HOVER,name:r.prefix+"hover_airport",condition:"searchresults"===r.action,filter:function(t){return _i_("8d1:ce18f1b41"),_r_(/airport/.test(t.type))}},{evt:r.atlas.EVENTS.RESULTS_CHANGED,name:r.prefix+"no_results_in_view",condition:"searchresults"===r.action,filter:function(){return _i_("8d1:a46f26a9"),_r_(0===r.atlas.getMarkersInBounds("hotel").length)}},{evt:"filters-applied",name:r.prefix+"map_filter",condition:"searchresults"===r.action},{evt:r.atlas.EVENTS.MARKERS_RENDERED,name:r.prefix+"current_property_lost",condition:"hotel"===r.action,filter:function(){_i_("8d1:050d6957");var t=r.atlas.getMarker("hotel_"+n.b_hotel_id);if(!t)return _r_(!1);var e=r.atlas.getBounds();return _r_(!e.contains([t.b_latitude,t.b_longitude]))}},{evt:r.atlas.EVENTS.ZOOM,name:r.prefix+"zoom_in",filter:_},{evt:r.atlas.EVENTS.ZOOM,name:r.prefix+"zoom_out",filter:a},{evt:r.atlas.EVENTS.ZOOM,name:r.prefix+"zoom_in_level_1",filter:s.bind(null,r.prefix+"zoom_in",5)},{evt:r.atlas.EVENTS.ZOOM,name:r.prefix+"zoom_in_level_2",filter:s.bind(null,r.prefix+"zoom_in",10)},{evt:r.atlas.EVENTS.ZOOM,name:r.prefix+"zoom_out_level_1",filter:s.bind(null,r.prefix+"zoom_out",5)},{evt:r.atlas.EVENTS.ZOOM,name:r.prefix+"zoom_out_level_2",filter:s.bind(null,r.prefix+"zoom_out",10)}])}(e).forEach(function(t){_i_("8d1:f094bd58"),(void 0===t.condition||t.condition)&&e.atlas.on(t.evt,l,t,!0),_r_()}),_r_()}})}),B.define("atlas-experiment-staging-helper",function(t){"use strict";_i_("8d1:5703e83c");var o=t("et");function _(t,e,r){if(_i_("8d1:c17594d2"),"function"==typeof t)return _r_(t.call(e,r));if(void 0===t||t)return _r_(!0);return _r_(!1)}return _r_({init:function(t,n){_i_("8d1:6cf8f82f"),t.forEach(function(i){_i_("8d1:7479db33"),i.cond&&(i.stages||i.goals)&&(Array.isArray(i.stages)&&i.stages.forEach(function(r){_i_("8d1:9018912a"),n.on(r.event,function t(e){_i_("8d1:b9e3d320"),_(r.cond,n,e)&&(o.stage(i.name,r.stage),n.off(r.event,t)),_r_()}),_r_()}),Array.isArray(i.goals)&&i.goals.forEach(function(r){_i_("8d1:0fac817f"),r.event?n.on(r.event,function t(e){_i_("8d1:c2aab9a8"),_(r.cond,n,e)&&(o.customGoal(i.name,r.goal),n.off(r.event,t)),_r_()}):_(r.cond,n)&&o.customGoal(i.name,r.goal),_r_()})),_r_()}),_r_()}})}),B.atlas.define("pubsub",function(t,e,r){"use strict";_i_("8d1:dda057e1");var l={API_BEFORE_LOAD:"api-before-load",API_LOADED:"api-loaded",BOUNDS_CHANGE:"bounds-change",BROWSER_USE_GEOLOCATION_ACCEPTED:"browser-use-geolocation-accepted",CLOSE:"close",DRAG:"drag",DRAG_END:"drag-end",DRAG_START:"drag-start",FILTERS_APPLIED:"filters-applied",FIXED_IW_OPEN:"fixed-iw-open",FIXED_IW_AUTO_OPEN:"fixed-iw-auto-open",IDLE:"idle",IW_OPEN:"iw-open",IW_CLOSE:"iw-close",IW_BEFORE_GET:"iw-get-before",IW_GET_SUCCESS:"iw-get-success",IW_GET_FAIL:"iw-get-fail",IW_RENDERED:"iw-rendered",IW_SWIPED_UP:"iw-swiped-up",IW_SWIPED_DOWN:"iw-swiped-down",LOAD:"load",CLICK:"click",MARKER_CLICK:"marker-click",MARKER_HOVER:"marker-hover",MARKER_OUT:"marker-out",MARKERS_GET_BEFORE:"markers-get-before",MARKERS_GET_SUCCESS:"markers-get-success",MARKERS_GET_FAIL:"markers-get-fail",MARKERS_GET_NO_DATA:"markers-get-no-data",MARKERS_RENDERED:"markers-rendered",MARKERS_READY:"markers-ready",RESULTS_CHANGED:"results-changed",LIST_UPDATED:"list-updated",MODULES_LOADED:"modules-loaded",OFFSET_CHANGE:"offset-change",OPEN:"open",REFRESH:"refresh",DISTRICT_POLYGON_DRAWN:"district-polygon-drawn",POLYGON_CLICK:"polygon-click",PRE_INIT:"pre-init",READY:"ready",RESIZE:"resize",SB_MARKER_ADDED:"sb-marker-added",TILES_LOAD:"tiles-loaded",ZOOM:"zoom",ZOOM_IN:"zoom-in",ZOOM_OUT:"zoom-out",GOOGLE_MAPTYPE_CHANGE:"google-map-type-change"};return _r_(function(t){_i_("8d1:857ccfa9");var _,a=!1,s={},d={};function c(t,e){_i_("8d1:8f23f3d4"),!s.hasOwnProperty(t)||e&&!0!==e?s.hasOwnProperty(t)&&(s[t]=s[t].filter(function(t){return _i_("8d1:0d6051ad"),_r_(t.handler!==e)})):s[t]=[],_r_()}return _r_({EVENTS:l,trigger:function(e,r){_i_("8d1:301d82cc");var t,i,n=this,o=[];t=e,i=r=r||null,_i_("8d1:0eab9a8b"),a&&console.log("Atlas event: "+t,i),_r_(),_||(_=e===l.READY),s.hasOwnProperty(e)&&(s[e].forEach(function(t){_i_("8d1:919925a8"),t.handler.call(n,r,t.args,e),t.once&&o.push([e,t.handler]),_r_()}),o.forEach(function(t){_i_("8d1:9a763c52"),c(t[0],t[1]),_r_()})),d.hasOwnProperty(e)&&d[e].forEach(function(t){_i_("8d1:7a3c8a75"),t.handler.call(n,r,t.args,e),_r_()}),_r_()},on:function(t,e,r,i){_i_("8d1:f0fc3de5"),(t&&"string"==typeof t?[t]:t).forEach(function(t){_i_("8d1:07d27b41"),"ready"===t&&_&&e.call(this,null,r),i?(d[t]=d[t]||[],d[t].push({handler:e,args:r||null})):(s[t]=s[t]||[],s[t].push({handler:e,args:r||null})),_r_()}),_r_()},once:function(t,e,r){_i_("8d1:62665005");var i=t&&"string"==typeof t?[t]:t;if("ready"===t&&_)return e.call(this,null,r),_r_();i.forEach(function(t){_i_("8d1:6b1917bd"),s[t]=s[t]||[],s[t].push({handler:e,args:r||null,once:!0}),_r_()}),_r_()},off:c,destroyAllBindings:function(){_i_("8d1:3370e245"),s={},_r_()},getSubscribers:function(t){return _i_("8d1:aa0b5e28"),_r_(s[t]||[])},getEvents:function(){return _i_("8d1:faefb19a"),_r_(Object.keys(s))},logEvents:function(t){return _i_("8d1:b2bbc88c"),_r_(a=t)}})})}),B.define("atlas/core.tracking",function(){"use strict";_i_("8d1:46b45d72");var t={};function e(e){_i_("8d1:dfed5e51");var r=0;if(!B.atlas.EXPERIMENTS)return _r_(r);if(void 0!==t[e])return _r_(t[e]);return B.atlas.EXPERIMENTS.forEach(function(t){_i_("8d1:7ecd4e64"),t.name!==e||!t.cond||t.mapId&&"default"!==t.mapId||(r=void 0!==t._FORCE_VARIANT_&&""!==t._FORCE_VARIANT_?parseInt(t._FORCE_VARIANT_,10)||0:B.et.track(e)),_r_()}),t[e]=r,_r_(r)}return _r_({getVariant:e,trackInTemplate:function(t){return _i_("8d1:b5df74fe"),_r_(e(t))}})}),B.atlas.define("geo.bounds",["geo.latLng"],function(e){"use strict";function o(t){return _i_("8d1:9400a071"),_r_(t instanceof e?t:new e(t[0]||0,t[1]||0))}function t(t){_i_("8d1:2faf6d2a");var e=(t=o(t)).lat,r=t.lng;if(90<e)switch(e%=360,parseInt(e/90)){case 0:break;case 1:e=90*parseInt((e+90)/90)-e;break;case 2:e=90*parseInt(e/90)-e;break;case 3:e-=90*parseInt((e+90)/90)}else if(e<-90)switch(e%=360,parseInt(e/90)){case 0:break;case-1:e=90*parseInt((e-90)/90)-e;break;case-2:e=90*parseInt(e/90)-e;break;case-3:e-=90*parseInt((e-90)/90)}return 180<r?r=(r+180)%360-180:r<-180&&(r=(r-180)%360+180),t.lat=e,t.lng=r,_r_(t)}function _(t,e){if(_i_("8d1:c195d859"),t&&e)this.extend(t),this.extend(e);else if("string"==typeof t){var r=t.split(",");if(4!==r.length)throw new Error("atlas/geo.bounds: Bounds string incorrectly formatted.");this.extend([r[0],r[1]]),this.extend([r[2],r[3]])}_r_()}return _i_("8d1:6923946c"),_.prototype={extend:function(t){_i_("8d1:ba6e266f");var e=o(t),r=this.sw,i=this.ne;return r?(this.sw.set(Math.min(r.lat,e.lat),Math.min(r.lng,e.lng)),this.ne.set(Math.max(i.lat,e.lat),Math.max(i.lng,e.lng))):(this.sw=e.clone(),this.ne=e.clone()),_r_(this)},reset:function(){_i_("8d1:050ea7fb"),this.ne=this.sw=null,_r_()},getNorthEast:function(){return _i_("8d1:98134f88"),_r_(this.ne||new e(0,0))},getSouthWest:function(){return _i_("8d1:6308dfd0"),_r_(this.sw||new e(0,0))},setNorthEast:function(t){_i_("8d1:4a0d012b"),this.ne=o(t),_r_()},setSouthWest:function(t){_i_("8d1:2a0b8a11"),this.sw=o(t),_r_()},getCenter:function(){return _i_("8d1:fa321a35"),_r_(new e((this.sw.lat+this.ne.lat)/2,(this.sw.lng+this.ne.lng)/2))},isEmpty:function(){return _i_("8d1:32654190"),_r_(!this.sw&&!this.ne||this.sw.toString()===this.ne.toString())},equals:function(t){return _i_("8d1:055ddc17"),_r_(t instanceof _&&this.toString()===t.toString())},intersects:function(t){_i_("8d1:0dc10708");var e=this.sw,r=this.ne,i=t.sw,n=t.ne,o=n.lat>=e.lat&&i.lat<=r.lat,_=n.lng>=e.lng&&i.lng<=r.lng;return _r_(o&&_)},union:function(t){return _i_("8d1:d15512ea"),this.extend(t.getSouthWest()),this.extend(t.getNorthEast()),_r_(this)},contains:function(t){var e,r,i,n;return _i_("8d1:ec598f35"),t instanceof _?(e=t.getNorthEast(),i=(r=t.getSouthWest()).lat>=this.sw.lat&&r.lng>=this.sw.lng&&e.lat<=this.ne.lat&&e.lng<=this.ne.lng):(r=e=o(t),n=Math.abs(this.ne.lng-this.sw.lng),i=r.lat>=this.sw.lat&&r.lat<=this.ne.lat&&(r.lng>=this.sw.lng&&r.lng<=this.sw.lng+n||r.lng<=this.sw.lng&&r.lng>=this.ne.lng-n)),_r_(i)},toMOMString:function(){return _i_("8d1:75dc29aa"),t(this.sw),t(this.ne),_r_([this.sw.lng,this.sw.lat,this.ne.lng,this.ne.lat].join(","))},toString:function(){return _i_("8d1:7f519eec"),t(this.sw),t(this.ne),_r_(["SW:",this.sw.toString(),",","NE:",this.ne.toString()].join(" "))}},_r_(_)}),B.atlas.define("geo.latLng",function(){"use strict";function t(t,e){var r;_i_("8d1:a1a93be5"),"string"==typeof t&&0<t.indexOf(",")?(r=t.split(","),this.lat=+r[0],this.lng=+r[1]):"object"==typeof google&&google.maps&&t instanceof google.maps.LatLng?(this.lat=+t.lat(),this.lng=+t.lng()):"[object Array]"===Object.prototype.toString.call(t)?(this.lat=+t[0],this.lng=+t[1]):(this.lat=+t||0,this.lng=+e||0),this[0]=this.lat,this[1]=this.lng,_r_()}return _i_("8d1:de4738b1"),t.prototype={set:function(t,e){return _i_("8d1:36ec4855"),this.lat=+t,this.lng=+e,_r_(this)},clone:function(){return _i_("8d1:52935c15"),_r_(new t(this.lat,this.lng))},toArray:function(){return _i_("8d1:8f055bed"),_r_([this.lat,this.lng])},toString:function(){return _i_("8d1:3753544c"),_r_(["[",this.lat,",",this.lng,"]"].join(""))}},_r_(t)}),B.atlas.define("geo.projection",["geometry.point","geo.latLng"],function(o,_){"use strict";_i_("8d1:381fb4dd");var a=6378137,s=.5/(Math.PI*a),d=Math.PI/180,c=180/Math.PI;function l(t){return _i_("8d1:41917663"),_r_(t*d)}function u(t){return _i_("8d1:4828700b"),_r_(256*Math.pow(2,t))}return _r_({toRadians:l,toDegrees:function(t){return _i_("8d1:cedbb532"),_r_(t*c)},getScale:u,getDistance:function(t,e){_i_("8d1:3fb48bb2");var r=t,i=e,n=l(i.lat-r.lat),o=l(i.lng-r.lng),_=Math.sin(n/2)*Math.sin(n/2)+Math.cos(l(r.lat))*Math.cos(l(i.lat))*Math.sin(o/2)*Math.sin(o/2);return _r_(2*Math.atan2(Math.sqrt(_),Math.sqrt(1-_))*a)},latLngToPoint:function(t,e){_i_("8d1:751360f0");var r,i=u(e)||1,n=(r=t,_i_("8d1:e58dbe8c"),_r_(new o(a*r.lng*d,a*Math.log(Math.tan(Math.PI/4+r.lat*d/2)))));return _r_(new o(i*s*n.x,i*-s*n.y))},pointToLatLng:function(t,e){_i_("8d1:4b7185c9");var r,i=u(e)||1,n=new o(t.x/i/s,t.y/i/-s);return _r_((r=n,_i_("8d1:194432b2"),_r_(new _((2*Math.atan(Math.exp(r.y/a))-Math.PI/2)*c,r.x*c/a))))}})}),B.atlas.define("geo.view",["geo.projection","geo.bounds","geo.latLng","geometry.point"],function(g,i,m,a){"use strict";_i_("8d1:76c63ac6");function t(t,e,r){_i_("8d1:f5fb030f"),this.zoom=!1,this.width=+t,this.height=+e,this.bounds=r instanceof i?r:new i,_r_()}return t.prototype={extend:function(t){return _i_("8d1:690104c8"),this.bounds.extend(t),this.zoom=!1,_r_(this)},extrapolate:function(t,e){_i_("8d1:c37e4059");var r=new m(t),i=g.latLngToPoint(r,e),n=new a(this.width/2,this.height/2),o=new a(i.x+n.x,i.y-n.y),_=new a(i.x-n.x,i.y+n.y);return this.setNorthEast(g.pointToLatLng(o,e)),this.setSouthWest(g.pointToLatLng(_,e)),_r_(this)},getCenter:function(t){_i_("8d1:0182d171");var e,r=this.bounds.getCenter(),i=this.getZoom();return t&&(e=g.latLngToPoint(r,i).subtract(t),r=g.pointToLatLng(e,i)),_r_(r)},getNorthWest:function(){_i_("8d1:240bc511");var t=this.bounds.getCenter(),e=this.getZoom(),r=new a(this.width/2,this.height/2),i=g.latLngToPoint(t,e).subtract(r);return _r_(g.pointToLatLng(i,e))},getSouthEast:function(){_i_("8d1:19fdeaf4");var t=this.bounds.getCenter(),e=this.getZoom(),r=new a(this.width/2,this.height/2),i=g.latLngToPoint(t,e).add(r);return _r_(g.pointToLatLng(i,e))},setNorthEast:function(t){_i_("8d1:4d55db22"),this.bounds.setNorthEast(t),_r_()},setSouthWest:function(t){_i_("8d1:9cb3e45d"),this.bounds.setSouthWest(t),_r_()},getZoom:function(t,e){_i_("8d1:0a90a412");var r,i,n=t||1,o=!0,_=this.bounds.getNorthEast(),a=this.bounds.getSouthWest(),s=new m(_.lat,a.lng),d=new m(a.lat,_.lng);if(!this.zoom){for(e=e||18;o&&n++<e;)r=g.latLngToPoint(s,n),i=g.latLngToPoint(d,n).subtract(r),o=parseInt(i.x,10)<=this.width&&parseInt(i.y,10)<=this.height;this.zoom=Math.max(t||1,n-1)}return _r_(this.zoom)},getZoomBySmarterFit:function(t,e){_i_("8d1:aefd4cca");var r,i,n=t||1,o=0,_=!1,a=1,s=this.bounds.getNorthEast(),d=this.bounds.getSouthWest(),c=new m(s.lat,d.lng),l=new m(d.lat,s.lng);for(e=e||18;!_&&n++<e;){r=g.latLngToPoint(c,n),i=g.latLngToPoint(l,n).subtract(r);var u=parseInt(i.x,10),f=parseInt(i.y,10),h=Math.min(u,this.width)*Math.min(f,this.height),p=h/(this.width*this.height+u*f-h);o<=p?(a=n,o=p):_=!0}return this.zoom=Math.max(t||1,a),_r_(this.zoom)},latLngToPixel:function(t){_i_("8d1:8eb082ac");var e=this.getZoom(),r=g.latLngToPoint(this.getNorthWest(),e);return _r_(g.latLngToPoint(t,e).subtract(r))},pixelToLatLng:function(t){_i_("8d1:bd7fef5a");var e=this.getZoom(),r=g.latLngToPoint(this.getNorthWest(),e);return _r_(g.pointToLatLng(t.add(r),e))},getDistance:function(t,e){return _i_("8d1:76b9ef62"),_r_(g.getDistance(t,e))},toString:function(){return _i_("8d1:0161d949"),_r_(this.bounds.toString())}},_r_(t)}),B.atlas.define("geometry.point",function(){"use strict";function e(t,e){_i_("8d1:9c64cf90"),this.x=+t,this.y=+e,_r_()}return _i_("8d1:05cd7b91"),e.prototype={set:function(t,e){return _i_("8d1:9059968f"),this.x=+t,this.y=+e,_r_(this)},clone:function(){return _i_("8d1:8e2ba1ed"),_r_(new e(this.x,this.y))},add:function(t){return _i_("8d1:910ab1ff"),_r_(new e(this.x+t.x,this.y+t.y))},subtract:function(t){return _i_("8d1:422c6d88"),_r_(new e(this.x-t.x,this.y-t.y))},toString:function(){return _i_("8d1:2da1ce65"),_r_(["[",this.x,",",this.y,"]"].join(""))}},_r_(e)}),B.atlas.define("provider-loader-v2",function(t){"use strict";_i_("8d1:7afae9ce");var e=t("promise"),_=t("jquery");function r(t,e,r){return _i_("8d1:770a022f"),_r_("google"===r?this.append(t,"GLOBAL_ATLAS_GOOGLE_MAPS_CALLBACK",e):this.get(t,e,r))}function s(t,e,r){_i_("8d1:13aa6c1c");var i=new RegExp("\\b("+e+"=).*?(&|$)");if(0<=t.search(i))return _r_(t.replace(i,"$1"+r+"$2"));return _r_(t+(0<t.indexOf("?")?"&":"?")+e+"="+r)}return r.prototype.append=function(r,i,n){_i_("8d1:052fe6b2");var o=this,_=document.createElement("script"),a=function(t,e,r){_i_("8d1:7cf433b1"),t.trigger(t.EVENTS.API_LOADED,t),e.isLoaded=!0,r(),_r_()};return _r_(new e(function(t,e){_i_("8d1:7ccb7908"),"object"==typeof window.google&&window.google.maps?a(n,o,t):(window[i]=function(){_i_("8d1:a604e423"),a(n,o,t),_r_()},n.get("channel")&&(r=s(r,"channel",n.get("channel"))),_.type="text/javascript",_.src=r,document.body.appendChild(_),o.isLoading=!0),_r_()}))},r.prototype.get=function(r,i,n){_i_("8d1:98dc460c");var o=this;return _r_(new e(function(t,e){if(_i_("8d1:491cf974"),"leaflet"===n&&window.L)return t(),_r_();i.get("channel")&&(r=s(r,"channel",i.get("channel"))),_.getScript(r,function(){_i_("8d1:83c8fafe"),i.trigger(i.EVENTS.API_LOADED,i),o.isLoaded=!0,t(),_r_()}),o.isLoading=!0,_r_()}))},_r_(r)}),B.atlas.define("polygons",function(){"use strict";_i_("8d1:541ff33a");var n={paths:[],clickable:!0,fillColor:"#0896ff",fillOpacity:.1,strokeColor:"#003580",strokeOpacity:.7,strokeWeight:3};return _r_({createPolygon:function(e){var r;_i_("8d1:7c5eba60");var t=n,i=e.style&&e.style.hover&&e.style.default;return i&&(t=Object.assign({},t,e.style.default)),(r=new this.Interface.Polygon(Object.assign({},t,e),this.Interface)).on("mouseover",function(t){_i_("8d1:a6f59657"),"function"==typeof e.mouseover&&e.mouseover.call(this,t),i&&r.setOptions(e.style.hover),_r_()}).on("mouseout",function(t){_i_("8d1:85d937a4"),"function"==typeof e.mouseout&&e.mouseout.call(this,t),i&&r.setOptions(e.style.default),_r_()}).on("click",function(t){_i_("8d1:acb1ba02"),"function"==typeof e.click&&e.click.call(this,t),_r_()}),_r_(r)},isPointInsidePolygon:function(t,e){_i_("8d1:bd06594b");for(var r=!1,i=+t[1],n=+t[0],o=0,_=e.length-1;o<e.length;_=o++){var a=+e[o][1],s=+e[o][0],d=+e[_][1],c=+e[_][0];n<s!=n<c&&i<(d-a)*(n-s)/(c-s)+a&&(r=!r)}return _r_(r)}})}),B.define("atlas/geolocation",function(t,e,r){_i_("8d1:fd28766c");var i=t("promise");r.exports={getCurrentPosition:function(){return _i_("8d1:1c0750c1"),_r_(new i(function(e,t){_i_("8d1:e60c2910"),"geolocation"in window.navigator?window.navigator.geolocation.getCurrentPosition(function(t){_i_("8d1:792d7794"),e([t.coords.latitude,t.coords.longitude]),_r_()},function(){_i_("8d1:c9d51f67"),t("Atlas: geolocation not accepted"),_r_()}):t("Atlas: geolocation not supported"),_r_()}))}},_r_()}),B.define("atlas-tools/reactive-module",function(t){"use strict";_i_("8d1:645054a1");var e={store:null,actions:{},atlas:null,settings:{},_prepareCore:function(t,e){_i_("8d1:221f039e"),this.store=t,this.settings=Object.assign({},this.settings,e),this.actions=this.settings.actions,this.atlas=this.settings.atlas,_r_()},connectStore:function(){},_prepareComponent:function(){_i_("8d1:b6a1f2c0"),this.initialize&&this.initialize.apply(this),_r_()},_prepareStore:function(t,e){_i_("8d1:fb6888c0"),this.getState&&(this.prevState=this.getState(),this._unsubscribeFromStore=this.store.subscribe(this._handleStoreUpdate.bind(this,!1))),_r_()},_handleStoreUpdate:function(t){_i_("8d1:675306c3");var e=this.getState(),r=this.prevState;this.prevState=e,(t||this.shouldComponentUpdate(e,r))&&(this.render&&this.render(e,r),this.componentDidUpdate(e,r)),_r_()},_destroyComponent:function(){_i_("8d1:9f176118"),this._unsubscribeFromStore&&this._unsubscribeFromStore(),_r_()},shouldComponentUpdate:function(t,e){return _i_("8d1:c49f4147"),_r_(t!==e)},componentDidUpdate:function(){}};return _r_(function(t){return _i_("8d1:9f8942f8"),_r_(Object.assign({},e,t))})}),B.define("atlas-tools/reactive-component",function(t){"use strict";_i_("8d1:e7979a57");var e=t("morphdom"),r=t("jstmpl"),i=t("component/reactive"),n=t("atlas-tools/reactive-module"),o=t("event-emitter"),_=i.extend(n({_prepareComponent:function(){if(_i_("8d1:00528b9d"),this.el=document.createElement("DIV"),this.el.setAttribute("data-component","dummy"),o.extend(this),this.settings.container?this.settings.noDOM||this.settings.container.appendChild(this.el):this.settings.placeholder.appendChild(this.el),this.settings.template&&(this.template=this.settings.template),this.settings.eventsMap&&this.events(this.settings.eventsMap),this.atlas.jstmpl?this._jstmpl=this.atlas.jstmpl.bind(this.atlas):this._jstmpl=r,this.settings.children&&this.settings.innerHtmlRenering)throw new Error("A component with innerHtmlRenering can not have children");this.settings.innerHtmlRenering?this._renderHtmlString=this._renderInnerHTML:this._renderHtmlString=this._renderMorphdom,this.settings.children&&(this._childrenConfigsMap=this.settings.children,this._childrenInstancesMap={}),this.settings.eventListeners&&Object.keys(this.settings.eventListeners).forEach(function(t){_i_("8d1:56a3cc13"),this.on(t,this.settings.eventListeners[t].bind(this)),_r_()}.bind(this)),this.init(),_r_()},_updateChild:function(t){_i_("8d1:f03ec0e3");var e=t.className,r=this._childrenConfigsMap[e];if(!r)return _r_(!1);return t.id&&(e+=t.id),this._childrenInstancesMap[e]||(this._childrenInstancesMap[e]=this._initChild(r,t)),_r_(!0)},_initChild:function(t,e){return _i_("8d1:037e564d"),t.id=e.getAttribute("data-id"),t.container=e,t.module.hasOwnProperty("getState")||(t.module.getState=this.getState.bind(this)),_r_(this.atlas.initComponent(t))},_discardChild:function(t){_i_("8d1:41086d50");var e=t.className;if(!this._childrenConfigsMap[e])return _r_();t.id&&(e+=t.id),this._childrenInstancesMap[e]&&(this._childrenInstancesMap[e]._destroyComponent(),delete this._childrenInstancesMap[e]),_r_()},_generateRenderOptions:function(r){_i_("8d1:bd2077e8");var i=this;return _r_(Object.assign({},r,{onNodeAdded:function(t){_i_("8d1:5db4a2e9"),r.onNodeAdded&&r.onNodeAdded(t),i._updateChild(t),_r_()},onNodeDiscarded:function(t){_i_("8d1:3a6cb18b"),r.onNodeDiscarded&&r.onNodeDiscarded(t),i._discardChild(t),_r_()},onBeforeElChildrenUpdated:function(t,e){if(_i_("8d1:44ab3fe7"),r.onBeforeElChildrenUpdated&&!1===r.onBeforeElChildrenUpdated(t,e))return _r_(!1);if(t!==e&&t!==i.el&&i._updateChild(t))return _r_(!1);return _r_(!0)}}))},_getRenderOptions:function(){if(_i_("8d1:881562eb"),this._renderOptions)return _r_(this._renderOptions);return this.settings.children?this._renderOptions=this._generateRenderOptions(this.renderOptions||{}):this._renderOptions=this.renderOptions,_r_(this._renderOptions)},_renderInnerHTML:function(t){_i_("8d1:a02a62a8"),this.el.innerHTML=t,this.el.removeAttribute("data-component"),_r_()},_renderMorphdom:function(t){_i_("8d1:23d67dd6"),e(this.el,t,this._getRenderOptions()),_r_()},render:function(){if(_i_("8d1:204ac405"),!this.template)return _r_();var t=this.template.render?this.template:this._jstmpl(this.template);this._renderHtmlString(t.render(this.getState()).trim()),_r_()},_callHook:function(t){if(_i_("8d1:049a9b0b"),this.settings.hooks&&"function"==typeof this.settings.hooks[t])return _r_(this.settings.hooks[t].apply(this,Array.prototype.slice.call(arguments,1)));return _r_(!1)}}));return _r_(function(t){_i_("8d1:ccfc87a8");var e=_.extend(t);return _r_(new e)})}),B.define("atlas-tools/state-utils",function(t){"use strict";_i_("8d1:97d58bb2");var e=t("redux"),r=t("atlas-tools/reactive-module"),i=t("atlas-tools/reactive-component"),n=t("Atlas/util-object");function o(t,e,r){return _i_("8d1:0cc093d2"),_r_(t.dispatch({type:e,__arguments__:r}))}function _(t,e,r,i){_i_("8d1:95dff017");var n=t(r);return n._prepareCore(e,i),n._prepareComponent(),n._prepareStore(),_r_(n)}return _r_({dispatch:function(){return _i_("8d1:985248bb"),_r_(o(arguments[0],arguments[1],[].slice.call(arguments,2)))},createActions:function(n,t){return _i_("8d1:b0aef510"),_r_(t.reduce(function(t,e){var r,i;return _i_("8d1:ca2298a3"),t[e]=(r=n,i=e,_i_("8d1:eafd2f36"),_r_(function(){_i_("8d1:cadf0877"),o(r,i,[].slice.call(arguments)),_r_()})),_r_(t)},{}))},initComponent:_.bind(null,i),initModule:_.bind(null,r),combineReducers:function(t){return _i_("8d1:ada8a8f5"),_r_(e.combineReducers(t.reduce(function(t,r){return _i_("8d1:3c77e0dc"),t[r.name]=function(t,e){return _i_("8d1:35066304"),t=t||r.initialState,r[e.type]&&(t=n.deepClone(t),e.__arguments__?r[e.type].apply(r,[t].concat(e.__arguments__)):r[e.type].call(r,t,e)),_r_(t)},_r_(t)},{})))},combineReducersWithShallowCopy:function(t){return _i_("8d1:eb022cd2"),_r_(e.combineReducers(t.reduce(function(t,r){return _i_("8d1:755d7df3"),t[r.name]=function(t,e){return _i_("8d1:c5b638db"),t=t||r.initialState,r[e.type]&&(t=Object.assign({},t),t=e.__arguments__?r[e.type].apply(r,[t].concat(e.__arguments__)):r[e.type].call(r,t,e)),_r_(t)},_r_(t)},{})))},createStore:function(t){return _i_("8d1:8d74cdcf"),_r_(e.createStore(t,window.__REDUX_DEVTOOLS_EXTENSION__&&window.__REDUX_DEVTOOLS_EXTENSION__()))}})}),B.define("atlas-tools/disperser",function(t){function o(t,e,r){_i_("8d1:b48b2cf2"),this.left=t.x-e.width/2-r.left,this.top=t.y-e.height-r.top,this.right=t.x+e.width/2+(e.labelWidth||0)+r.right,this.bottom=t.y+r.bottom,_r_()}function e(t,e){_i_("8d1:1f65179e"),this.atlas=t,this.offsetsByType=e,this.shapesByLevel={},_r_()}return _i_("8d1:b4b05b7a"),o.prototype.intersects=function(t){return _i_("8d1:dbc16a56"),_r_(!(t.left>this.right||t.top>this.bottom||t.right<this.left||t.bottom<this.top))},e.prototype.getOffset=function(t){if(_i_("8d1:0d2afa5e"),this.offsetsByType[t])return _r_(this.offsetsByType[t]);return _r_(this.offsetsByType.default)},e.prototype.disperse=function(t){_i_("8d1:d494193a");var e=new o(this.atlas.coordsToPixels([t.b_latitude,t.b_longitude]),t,this.getOffset(t.b_basic_type)),r=t.b_dispersion_level||"default";this.shapesByLevel[r]||(this.shapesByLevel[r]=[]);var i=this.shapesByLevel[r];if(0===i.length||t.b_persistent||t.b_states.active)return i.push(e),_r_(!0);var n=i.every(function(t){return _i_("8d1:86e58636"),_r_(!e.intersects(t))});return n&&i.push(e),_r_(n)},e.prototype.filter=function(t){return _i_("8d1:79736258"),_r_(t.filter(this.disperse.bind(this)))},_r_(e)}),B.define("atlas-tools/templates",function(t){_i_("8d1:86662d77");var i=t("et");return _r_({createJstmplHelpers:function(e,r){_i_("8d1:4755fcb6");var t={HELPER_FROM_PRICE:function(t){return _i_("8d1:533ff4f5"),_r_(r.map_vars.translation_from.replace("price_placeholder",t).replace("price_placeholdernbsp;","$ "))},HELPER_IS_DEFINED:function(t){return _i_("8d1:770ee309"),_r_(!!t||0===t||!1===t)},HELPER_ENV:function(t){return _i_("8d1:b24c6cca"),_r_(r.hasOwnProperty(t)?r[t]:"")},HELPER_LENGTH:function(t){return _i_("8d1:e54cf390"),_r_("string"==typeof t?t.length:0)},HELPER_IW_B_BLOCKS:function(t,e,r){if(_i_("8d1:2ea95e0c"),!t)return _r_(!1);if(t[e]&&t[e][r])return _r_(t[e][r]);if(t.b_room_group&&t.b_room_group[e]&&t.b_room_group[e][r])return _r_(t.b_room_group[e][r]);return _r_(!1)},ATLAS_TRACK:function(t){return _i_("8d1:a5547abe"),_r_(e.getVariant(t))},ATLAS_ENV:function(t){return _i_("8d1:35cd33a1"),_r_(!!t&&e.get(t))},ATLAS_FLAGS:function(t,e){return _i_("8d1:a0d6f18c"),_r_(t[e]&&1==t[e]?"1":"")},ATLAS_CUSTOM_GOAL:function(t,e){_i_("8d1:d36e7dae"),i.customGoal(t,e),_r_()},ATLAS_KEYS:function(t){return _i_("8d1:022c9f87"),_r_(Object.keys(t))}};return _r_(t)}})}),B.define("atlas-tools/markers",function(t){_i_("8d1:3633fe8d");var u=t("jstmpl"),i=t("Atlas/geo.latLng");function e(t,e){var r;return _i_("8d1:defae965"),t=Object.assign({b_v2:!0},t),r=t,_i_("8d1:e70cc2ed"),r.b_id=String(r.b_id),_r_(),function(t){_i_("8d1:156e509a"),t.b_type=t.b_type||t.b_marker_type,t.b_marker_type&&delete t.b_marker_type;/hotel/.test(t.b_type)?t.b_basic_type="hotel":/city/.test(t.b_type)?t.b_basic_type="city":/airport/.test(t.b_type)?t.b_basic_type="airport":/user/.test(t.b_type)?t.b_basic_type="user":/landmark/.test(t.b_type)&&(t.b_basic_type="landmark");t.b_type&&!t.b_basic_type?t.b_basic_type=t.b_type:t.b_type||(t.b_type="default",t.b_basic_type="default");_r_()}(t),function(t){_i_("8d1:9c59f5f3"),t.b_states=t.b_states||{},t.b_states.hasOwnProperty("overlay")||(t.b_states.overlay=!0);t.b_states.hasOwnProperty("active")||(t.b_states.active=!1);t.b_states.hasOwnProperty("visited")||(t.b_states.visited=!1);t.b_states.hasOwnProperty("hover")||(t.b_states.hover=!1);/soldout/.test(t.b_type)&&(t.b_states.soldout=!0);/comp_set/.test(t.b_type)&&(t.b_states.compset=!0);/current/.test(t.b_type)&&(t.b_states.current=!0);/hotel_sr/.test(t.b_type)&&(t.b_states.searchresults=!0);/genius/.test(t.b_type)&&(t.b_states.genius=!0);t.b_persistent&&(t.b_states.persistent=!0);_r_()}(t),function(t){_i_("8d1:74db8a67"),t.b_atlas_id||(t.b_atlas_id=(t.b_basic_type||Math.round(1e5*Math.random()))+"_"+t.b_id);_r_()}(t),function(t){_i_("8d1:f43a1f8a"),t.latLng instanceof i||(t.latLng=t.latLng||[parseFloat(t.b_latitude,10),parseFloat(t.b_longitude,10)],Array.isArray(t.latLng)?t.latLng=new i(t.latLng[0],t.latLng[1]):t.latLng=new i(t.latLng.lat,t.latLng.lng));t.b_latitude=t.latLng.lat,t.b_longitude=t.latLng.lng,_r_()}(t),function(t){_i_("8d1:1bd1aa35"),t.anchor||(t.anchor="BOTTOM");_r_()}(t),function(t){_i_("8d1:157855c5"),t.b_iw_id||(t.b_iw_id="main");_r_()}(t),t.b_prepared=!0,_r_(t)}function f(e){return _i_("8d1:0d11701c"),_r_(e.b_atlas_id+Object.keys(e.b_states).map(function(t){return _i_("8d1:8e642848"),_r_(t+e.b_states[t])}).sort().toString())}return _r_({prepareMarker:e,prepareMarkers:function(t){return _i_("8d1:8c0e9e1f"),_r_(t.map(e))},upsortCompset:function(t){_i_("8d1:48b02879");var e=t.reduce(function(t,e,r){return _i_("8d1:9f9966d4"),e.b_states&&e.b_states.compset?t.compset.push(e):t.rest.push(e),_r_(t)},{compset:[],rest:[]});return _r_(e.compset.concat(e.rest))},updateStates:function(t,e){return _i_("8d1:2b87223e"),_r_(Object.assign({},t,{b_states:Object.assign({},t.b_states,e)}))},mergeMarkers:function(t,e){return _i_("8d1:97b801b8"),_r_(Object.assign({},t,e,{b_states:Object.assign({},t.b_states,e.b_states)}))},createDomCache:function(t){_i_("8d1:f78f98c0");var e=document.createElement("div");return e.style.opacity=0,e.style.left="-1000px",e.style.position="absolute",t.appendChild(e),_r_({container:e,data:{}})},generateCacheKey:f,_updateMarkersDimensions:function(_,a,s,t,d){_i_("8d1:ae01137b");var c=[],e=[],r={},l=document.createDocumentFragment();if(!_.container.offsetParent)return _r_(e);return t.forEach(function(t){_i_("8d1:083106ed");var e=s.get(t);if(!e||!d.contains([e.b_latitude,e.b_longitude]))return _r_();var r=f(e),i=_.data[r];if(i&&i.dimensions)return c.push(i),_r_();var n=document.createElement("div"),o=e.b_template.render?e.b_template:u(e.b_template);n.className="gm-style",n.style.position="absolute",n.innerHTML=o.render(e),l.appendChild(n),i={getDimensions:function(){return _i_("8d1:e6fb7173"),i.dimensions||(i.dimensions=function(t,e){var r;_i_("8d1:73c4e106");var i={width:(r=e.b_main_dimensions_selector?t.querySelector(e.b_main_dimensions_selector):t).offsetWidth,height:r.offsetHeight};if(e.b_label_dimensions_selector){var n=t.querySelector(e.b_label_dimensions_selector);i.labelWidth=n?n.offsetWidth:0}return _r_(i)}(n,e)),Object.assign(i.dimensions,{zIndex:function(t,e){_i_("8d1:8555feec");var r=t.default,i=t[e.b_type]||r;if(e.zIndex)return _r_(e.zIndex);if(e.b_states.current&&i.current)return _r_(i.current);if(e.b_states.active&&i.active)return _r_(i.active);if(e.b_states.hover&&i.hover)return _r_(i.hover);if(e.b_states.special&&i.special)return _r_(i.special);return _r_(i.normal)}(a,e)}),_r_(i.dimensions)},id:t,dimensions:null},_.data[r]=i,c.push(i),_r_()}),_.container.appendChild(l),c.forEach(function(t){_i_("8d1:a208bd2f"),r[t.id]=Object.assign({},s.get(t.id),t.getDimensions()),_r_()}),t.forEach(function(t){_i_("8d1:149a2274"),e.push(r[t]||t),_r_()}),_.container.innerHTML="",_r_(e)}})}),B.define("atlas-tools/markers-loader",function(t){"use strict";_i_("8d1:693ac27e");var n=t("jquery"),e=B.require("promise");function r(t){_i_("8d1:e3874f88"),this._xhr=null,this.events=t.events,_r_()}return r.prototype.getMarkers=function(t){if(_i_("8d1:d488402d"),this._xhr&&this._xhr.abort(),!t.bbox)return _r_(e.reject());var i=this;return this.events&&this.events.trigger(this.events.EVENTS.MARKERS_GET_BEFORE),_r_(new e(function(e,r){_i_("8d1:832842bd"),i._xhr=n.ajax({url:t.url+";BBOX="+t.bbox,error:function(t,e){_i_("8d1:955a90d3"),"abort"!==e&&i.events&&i.events.trigger(i.events.EVENTS.MARKERS_GET_FAIL),_r_()},success:function(t){if(_i_("8d1:1ae7b4a7"),i.events&&i.events.trigger(i.events.EVENTS.MARKERS_GET_SUCCESS,t),!t)return i.events&&i.events.trigger(i.events.EVENTS.MARKERS_GET_NO_DATA,t),_r_(r());return _r_(e(t))}}),_r_()}))},_r_(r)}),B.define("atlas-tools/polygons",function(t){_i_("8d1:03191f0f");var i=t("Atlas/geo.bounds"),o={paths:[],clickable:!0,fillColor:"#0896ff",fillOpacity:.1,strokeColor:"#003580",strokeOpacity:.7,strokeWeight:3};function r(t){if(_i_("8d1:8b07964d"),"Feature"!==t.type)throw"[Atlas/polygons:parseGeoJsonPolygon] input needs to be a Feature";return _r_(t.geometry.coordinates.map(function(t){return _i_("8d1:2bfcc4b8"),_r_(t.map(function(t){return _i_("8d1:feeb5d7a"),_r_([t[1],t[0]])}))}))}return _r_({createPolygon:function(e,t){var r;_i_("8d1:a3eba27c");var i=o,n=e.style&&e.style.hover&&e.style.default;return n&&(i=Object.assign({},i,e.style.default)),(r=new t.Polygon(Object.assign({},i,e),t)).on("mouseover",function(t){_i_("8d1:a6f596571"),"function"==typeof e.mouseover&&e.mouseover.call(this,t),n&&r.setOptions(e.style.hover),_r_()}).on("mouseout",function(t){_i_("8d1:85d937a41"),"function"==typeof e.mouseout&&e.mouseout.call(this,t),n&&r.setOptions(e.style.default),_r_()}).on("click",function(t){_i_("8d1:acb1ba021"),"function"==typeof e.click&&e.click.call(this,t),_r_()}),_r_(r)},isPointInsidePolygon:function(t,e){_i_("8d1:bd06594b1");for(var r=!1,i=+t[1],n=+t[0],o=0,_=e.length-1;o<e.length;_=o++){var a=+e[o][1],s=+e[o][0],d=+e[_][1],c=+e[_][0];n<s!=n<c&&i<(d-a)*(n-s)/(c-s)+a&&(r=!r)}return _r_(r)},fixLngLatPolygon:function(t){return _i_("8d1:fdb70797"),_r_([{polygon:t.map(function(t){return _i_("8d1:2bf88d3f"),_r_([t[1],t[0]])})}])},parseGeoJsonPolygon:r,parseGeoJsonPolygons:function(t){_i_("8d1:e98cc4ef");var e=[];if(Object.keys(t).length){if("FeatureCollection"!==t.type)throw"[Atlas/polygons:parseGeoJsonPolygons] input needs to be a FeatureCollection";t.features.forEach(function(t){_i_("8d1:076cfaf8"),e.push(r(t)),_r_()})}return _r_(e)},polygonsToBounds:function(e){_i_("8d1:31d772d9");var r=new i;return Array.isArray(e)||(e=Object.keys(e).map(function(t){return _i_("8d1:c5afd69e"),_r_(e[t])})),e.forEach(function(t){_i_("8d1:ba958d61"),t.segments&&t.segments[0].forEach(function(t){_i_("8d1:4cd4c287"),r.extend(t),_r_()}),_r_()}),_r_(r)}})}),B.define("atlas-tools/polygons-loaders",function(t){"use strict";_i_("8d1:1da63a46");var i=t("fragment"),n=t("server-data"),r=B.require("promise");function o(t,e){_i_("8d1:5142e04c");var r={district_ids:t,get_polygons:!0,use_compass:1};return r[n.b_site_type]=1,e&&(r.ufi=e),_r_(i.call("ufi.districts",r).then(function(r){if(_i_("8d1:3ef1088b"),!r)return _r_(null);return Object.keys(r).forEach(function(t){_i_("8d1:b737a887");var e=r[t];e.id=t,e.polygon&&Array.isArray(e.polygon)&&e.polygon.length||delete r[t],_r_()}),_r_(r)}))}function e(t){if(_i_("8d1:68f29b66"),!t)return _r_(r.resolve(null));var e={ufi:t,city_centre:!0,get_polygons:!0,use_compass:1};return _r_(i.call("ufi.districts",e).then(function(e){if(_i_("8d1:3d516880"),!e)return _r_(null);var t,r=Object.keys(e).map(function(t){return _i_("8d1:7fbfc098"),e[t].id=t,_r_(e[t])});return _r_((t=r,_i_("8d1:59550b71"),_r_(0<t.length&&t.every(function(t){return _i_("8d1:0b4f9b61"),_r_(t&&t.polygon)}))?r:null))}))}return _r_({loadCityCenter:e,loadCityCenterFormatted:function(t){return _i_("8d1:45f27c3a"),_r_(e(t).then(function(t){if(_i_("8d1:0b17e541"),!t)return _r_();return _r_(t.map(function(t){return _i_("8d1:59a5e4e7"),_r_(Object.assign(t,{b_id:t.id,b_title:t.name,b_latitude:t.latitude,b_longitude:t.longitude}))}))}))},loadOldTown:function(t){return _i_("8d1:357c0e50"),_r_(i.call("geo.geo_object",{class_name:"OldTown",ufi:t,load_geometry_for_map:!0}).then(function(t){if(_i_("8d1:8ebfb5cf"),!t||!t.length)return _r_(null);return _r_(t.map(function(t){return _i_("8d1:f49b2f44"),t.polygon=function(t){_i_("8d1:bc3c5a02");for(var e=[],r=t.split(","),i=0;i<r.length;i+=2){var n=parseFloat(r[i]),o=parseFloat(r[i+1]);isNaN(n)||isNaN(o)||e.push([n,o])}return _r_(e)}(t.geom),_r_(t)}))}))},loadDistrict:function(e,t){return _i_("8d1:5faf0625"),_r_(o([e],t).then(function(t){return _i_("8d1:6dca7a00"),_r_(t[e])}))},loadDistricts:o})}),B.define("atlas-tools/track-fps",function(){return _i_("8d1:531c52d2"),_r_(function(t,_,e,r){if(_i_("8d1:16a02229"),!window.requestAnimationFrame||void 0===window.performance||void 0===window.performance.now)return _r_();var a,s=B.debug("atlas_fps"),d=0;var i,c=!1;function n(){_i_("8d1:45ce5f23");var i=performance.now(),n=0;c=!1;var o=function(){if(_i_("8d1:280c98e6"),n++,c){var t=performance.now(),e=Math.round(1e3*n/(t-i));r=e,_i_("8d1:d9bf92ff"),s.log(_,"fps",r),d?a=(d*a+r)/(d+=1):(d=1,a=r),s.log(_,"fps avg",a),_r_()}else requestAnimationFrame(o);var r;_r_()};requestAnimationFrame(o),_r_()}function o(){_i_("8d1:a4f0bd8e"),c=!(i=void 0),_r_()}function l(){_i_("8d1:1abab5fe"),void 0===i?n():clearTimeout(i),i=setTimeout(o,500),_r_()}r?(t.on(e,n),t.on(r,o)):t.on(e,l),setTimeout(function(){_i_("8d1:b9707805"),a&&(s.log(_,"1m",a),B.et.goalWithValue(_+"_avg_1m",parseInt(a))),r?(t.off(e,n),t.off(r,o)):t.off(e,l),_r_()},6e4),_r_()})}),B.define("atlas-tools/tracking",function(t){_i_("8d1:4de54960");var o=t("et"),_={};return _r_({getVariant:function(e,r,t){_i_("8d1:d0ed0e8f");var i=0,n=r?r+e:e;if(!Array.isArray(t))return _r_(i);if(void 0!==_[n])return _r_(_[n]);return t.forEach(function(t){_i_("8d1:a90fe1ed"),t.name!==e||!t.cond||t.mapId&&r&&r!==t.mapId||(i=void 0!==t._FORCE_VARIANT_&&""!==t._FORCE_VARIANT_?parseInt(t._FORCE_VARIANT_,10)||0:o.track(e)),_r_()}.bind(this)),_[n]=i,_r_(i)}})}),B.define("atlas-tools/map-polyfill",function(){function e(t){_i_("8d1:e7eab182"),this.collection=Object.assign({},t?t.entries():{}),_r_()}return _i_("8d1:40fd3887"),e.prototype.set=function(t,e){_i_("8d1:4ae7f83c"),this.collection[t]=e,_r_()},e.prototype.get=function(t){return _i_("8d1:553ed6ca"),_r_(this.collection[t])},e.prototype.has=function(t){return _i_("8d1:e5627985"),_r_(!!this.get(t))},e.prototype.entries=function(t){return _i_("8d1:c6146bd1"),_r_(this.collection)},e.prototype.forEach=function(e){_i_("8d1:8a2a0e9a"),Object.keys(this.collection).forEach(function(t){_i_("8d1:08f4054b"),e.call(this,this.collection[t],t),_r_()}.bind(this)),_r_()},e.prototype.clear=function(){_i_("8d1:a2f00645"),this.collection={},_r_()},_r_({create:function(t){return _i_("8d1:9405d9a7"),"undefined"==typeof Map?_r_(new e(t)):_r_(function(t){_i_("8d1:d1058431");var e=t&&0<t.size,r=new window.Map(e?t:void 0);return e&&0===r.size&&t.forEach(function(t,e){_i_("8d1:22c833a4"),r.set(e,t),_r_()}),_r_(r)}(t))},keys:function(t){_i_("8d1:851b68fc");var r=[];if(!t||!t.size)return _r_([]);if(t.collection)return _r_(Object.keys(t.collection));return t.forEach(function(t,e){_i_("8d1:265b85d7"),r.push(e),_r_()}),_r_(r)}})}),B.define("atlas-tools/gcj2wgs",function(){_i_("8d1:ef0160b2");function i(t,e){_i_("8d1:2712d8f1");var r=.006693421622965943,i=function(t,e){_i_("8d1:43649e59");var r=t*e,i=Math.sqrt(Math.abs(t)),n=t*Math.PI,o=e*Math.PI,_=20*Math.sin(6*n)+20*Math.sin(2*n),a=_,s=_;return a+=20*Math.sin(o)+40*Math.sin(o/3),s+=20*Math.sin(n)+40*Math.sin(n/3),a+=160*Math.sin(o/12)+320*Math.sin(o/30),s+=150*Math.sin(n/12)+300*Math.sin(n/30),a*=2/3,s*=2/3,_r_({lat:a+=2*t-100+3*e+.2*e*e+.1*r+.2*i,lng:s+=300+t+2*e+.1*t*t+.1*r+.1*i})}(e-105,t-35),n=t/180*Math.PI,o=Math.sin(n);o=1-r*o*o;var _=Math.sqrt(o);return i.lat=180*i.lat/(6378137*(1-r)/(o*_)*Math.PI),i.lng=180*i.lng/(6378137/_*Math.cos(n)*Math.PI),_r_(i)}return _r_(function(t,e){if(_i_("8d1:d1fdd3a5"),function(t,e){if(_i_("8d1:b1fa0f9c"),e<72.004||137.8347<e)return _r_(!0);if(t<.8293||55.8271<t)return _r_(!0);return _r_(!1)}(t,e))return _r_({lat:t,lng:e});var r=i(t,e);return _r_({lat:t-r.lat,lng:e-r.lng})})}),B.define("atlas-tools/beach-markers",function(t){_i_("8d1:b5828a10");var i=t("server-data");return _r_({generateMarkers:function(t,e,r){(_i_("8d1:5f1baecc"),i.beach_team_pilot_data_loaded&&r&&Array.isArray(r))&&(r.some(function(t){return _i_("8d1:bdc74893"),_r_(Array.isArray(t.b_nearby_beaches)&&!t.b_nearby_beaches.length)})&&("searchresults"===i.b_action&&"www"===i.b_site_type&&B&&B.squeak&&B.squeak("YWYHaUWbTQCMYWYHAbASKFWe"),"hotel"===i.b_action&&"www"===i.b_site_type&&B&&B.squeak&&B.squeak("YWYHfZHQScWDBaUEIQJZRZae")));if(!e||!e.beaches)return"searchresults"==i.b_action&&"www"==i.b_site_type&&B&&B.squeak&&B.squeak("YWYHaUWbTQCMYWYHfREFHT"),"hotel"==i.b_action&&"www"==i.b_site_type&&B&&B.squeak&&B.squeak("YWYHfZHQScWDBaUEVHMbEO"),_r_([]);return _r_(e.beaches.reduce(function(t,e){_i_("8d1:4c76b881");var r,i=e.center.split(",");return Array.isArray(e.hero_image)&&e.hero_image.length&&e.hero_image[0]&&e.hero_image[0]["600x400"]?r=e.hero_image[0]["600x400"]:Array.isArray(e.destination_images)&&e.destination_images.length&&e.destination_images[0]&&e.destination_images[0]["600x400"]&&(r=e.destination_images[0]["600x400"]),t.push({b_id:e.id,b_type:"beach",b_basic_type:"pilot_beach",b_iw_id:"beach_pilot_iw",b_dispersion_level:"beaches",b_name:e.name,b_latitude:i[0],b_longitude:i[1],b_image_url:r,b_desc:e.desc,b_reviews_html:e.reviews?B.jstmpl("beach_review_score").render(e.reviews):"",b_panel_trigger_options:{panel:"explore_beaches_panel",target:"sliding-view__beach",dest_id:e.id,dest_title:B.jstmpl.translations("beach_explore_beach_panel_overview_header",null,{beach_name:e.name})}}),_r_(t)},[]))}})}),B.define("atlas-tools/ski-markers",function(t){_i_("8d1:4ebdd548");var i=t("et"),r=t("server-data");return _r_({generateMarkers:function(t){_i_("8d1:6991fc05");var e=[];return t.b_ski_lift_geoobjects&&Array.isArray(t.b_ski_lift_geoobjects)?("hotel"==r.b_action&&i.stage("aXbSbcBUcJaRMSAdRTUOOIBBO",3),i.stage("aXbSbcBUcJaRMSAdRTUcCcCcCC",2),e=e.concat(this.prepareSkiGeoLiftMarkers(t.b_ski_lift_geoobjects))):("searchresults"==r.b_action&&"www"==r.b_site_type&&B&&B.squeak&&B.squeak("cJaUWbTQCMVCDODXPdRe"),r.ski_hp_is_ski_experience&&("hotel"==r.b_action&&"www"==r.b_site_type&&B&&B.squeak&&B.squeak("cJfZHQScWDIKPDPREFHT"),"hotel"==r.b_action&&"mdot"==r.b_site_type&&B&&B.squeak&&B.squeak("cJfZHYZNaPWXYPYHMbEO"))),t.b_ski_resort_geoobjects&&Array.isArray(t.b_ski_resort_geoobjects)&&("hotel"==r.b_action&&i.stage("aXbSbcBUcJaRMSAdRTUOOIBBO",3),i.stage("aXbSbcBUcJaRMSAdRTUcCcCcCC",2),e=e.concat(this.prepareSkiGeoResortMarkers(t.b_ski_resort_geoobjects))),_r_(e)},prepareSkiGeoLiftMarkers:function(t){_i_("8d1:74b00c42");var e=!1,r=t.map(function(t){return _i_("8d1:950bd53e"),t.b_type=t.b_basic_type="ski_lift",t.capacity&&(e=!0),1==B.env.fe_is_ski_sr_hp_lift_type_on_map_d_exp?t.b_iw_id="ski_lift_capacity_iw":t.b_iw_id="ski_lift_iw",t.b_persistent=1,t.b_latitude=t.geometry.latitude,t.b_longitude=t.geometry.longitude,t.b_name=t.name,t.b_is_geo_ski_lift=1,t.b_id=t.geo_object_id,t.b_panel_trigger_options={panel:"ski_overview_panel",dest_title:t.resort_name,target:"sliding-view__ski",resort_id:t.ski_resort_id,landmark_id:0},_r_(t)});return e&&B.env.b_is_high_value_customer_ski_exp&&i.stage("cJaUDSWXYPNZQIBeGAae",7),_r_(r)},prepareSkiGeoResortMarkers:function(t){_i_("8d1:8ed7264a");var e=t.map(function(t){return _i_("8d1:f87e2bad"),t.b_type=t.b_basic_type="ski_resort_land_mark",t.b_iw_id="ski_resort_land_mark_iw",t.b_persistent=1,t.b_is_geo_ski_resort=1,t.b_id=t.landmark_id,t.b_latitude=t.geometry.latitude,t.b_longitude=t.geometry.longitude,t.b_name=t.name,t.b_panel_trigger_options={panel:"ski_overview_panel",dest_title:t.b_name,target:"sliding-view__ski",resort_id:0,landmark_id:t.b_id},t.zIndex=510,t.fe_disableSkiPanel=parseInt(r.fe_is_trip_types_hp_ski_panel_bo_mdot),_r_(t)});return _r_(e)}})}),B.define("atlas",function(t){if(_i_("8d1:46ab72f0"),"mdot"===t("server-data").b_site_type)return _r_(window.Atlas);return _r_(t("atlas-core"))}),B.atlas.define("provider-google-autocomplete-result",["util-object","util-array","util-getset"],function(n,o,_){"use strict";function t(t,e){_i_("8d1:008e6160");var r,i={map:e,data:{id:t.place_id,title:(r=t.terms,_i_("8d1:7124f750"),_r_(r&&r.length&&r[0].value||"")),address:function(t){_i_("8d1:fff678c1");var e=[];return o.each(t.slice(1),function(t){_i_("8d1:ffcc73fc"),t.value&&e.push(t.value),_r_()}),_r_(e.join(", "))}(t.terms),description:t.description,matched_substrings:t.matched_substrings,types:t.types}};n.extend(i,t),n.extend(this,_.call(this,i)),_r_()}return _i_("8d1:0a327398"),t.prototype.getDetails=function(t){_i_("8d1:f864fa0a");var e=this.get("map"),r=this.get("place_id");return _r_(e.getPlaceDetails({placeId:r},t))},_r_(t)}),B.atlas.define("provider-google-autocomplete",["util-array","provider-google-autocomplete-result"],function(_,a){"use strict";_i_("8d1:6be95a0c");var e,s=B.require("jquery"),d=4e3;return _r_({autocomplete:function(t,r,i){_i_("8d1:4526b2e5");var n=this,o=function(t,e){_i_("8d1:b9be6cda");var r=e.map&&e.map.getBounds(),i={input:t.query};return r?i.bounds=r:t.lat&&t.lon&&(i.location=new google.maps.LatLng(t.lat,t.lon),i.radius=Math.min(parseInt(t.radius,10),d)),t.types&&(i.types=t.types),_r_(i)}(t,n);e=e||new google.maps.places.AutocompleteService,s.get("/gapi_monitor",{type:"places_autocomplete"}),e.getPlacePredictions(o,function(t,e){_i_("8d1:ea730ec7"),e&&-1<e.indexOf("OK")&&t?r(function(t,e){_i_("8d1:a3ff6b8d");var r=[];return 0<t.length&&_.each(t,function(t){_i_("8d1:f390ea9c"),t.place_id&&t.terms&&r.push(new a(t,e)),_r_()}),_r_(r)}(t,n)):"function"==typeof i&&i(e,o),_r_()}),_r_()}})}),B.atlas.define("provider-google-bounds",function(){"use strict";return _i_("8d1:b35ce368"),_r_({getBoundingBox:function(){_i_("8d1:79dd96a3");var t,e,r=this.map.getBounds(),i=null;return r&&(t=r.getSouthWest(),e=r.getNorthEast(),i={SW:[t.lat(),t.lng()],NE:[e.lat(),e.lng()]}),_r_(i)}})}),B.atlas.define("provider-google-center",function(){"use strict";return _i_("8d1:295adca8"),_r_({getCenter:function(t){_i_("8d1:d60a2487");var e=this.map.getCenter(),r=t?{x:-1*t.x,y:-1*t.y}:{},i=t?this.getOffsetLatLng([e.lat(),e.lng()],r):e;return _r_([i.lat(),i.lng()])},getLatLng:function(t,e){return _i_("8d1:7fa6adfa"),_r_(new google.maps.LatLng(t,e))},panBy:function(t,e){_i_("8d1:d789bb2d"),this.map.panBy(t,e),_r_()},panTo:function(t,e){_i_("8d1:b636616a"),this.map.panTo(this.getOffsetLatLng(t,e)),_r_()},resize:function(){_i_("8d1:e746d6f7"),google.maps.event.trigger(this.map,"idle"),_r_()},setCenter:function(t,e){_i_("8d1:9834df2a"),this.map.setCenter(this.getOffsetLatLng(t,e)),_r_()}})}),B.atlas.define("provider-google-circles",function(){"use strict";_i_("8d1:1ca0e482");var o=[];function i(t){return _i_("8d1:2f4ac4d9"),_r_(new google.maps.LatLng(t[0],t[1]))}function t(t,e){_i_("8d1:dd8c79dc");var r={};Object.assign(r,t,{center:i(t.center),readius:t.readius,map:e.map}),this.ubber=e,this.core=new google.maps.Circle(r),_r_()}return t.prototype={setOptions:function(t){_i_("8d1:c9521f20");var e={};return t.center&&(t.center=i(t.center)),Object.assign(e,t),this.core.setOptions(e),_r_(this)},getCenter:function(){_i_("8d1:eb7e63cf");var t=this.core.getCenter();return _r_([t.lat(),t.lng()])},on:function(r,i){_i_("8d1:d38de135");var n=this;return o.push({context:this,evt:r,handler:i,listener:google.maps.event.addListener(this.core,r,function(t){_i_("8d1:70e73736");var e={};t.latLng&&(e.latLng=[t.latLng.lat(),t.latLng.lng()]),n.ubber.ubber.trigger("circle-"+r,this),i.call(n,e),_r_()})}),_r_(this)},off:function(t,e){_i_("8d1:b7a5f26b");for(var r,i,n=o.length;n--;)if((r=o[n]).context===this&&r.evt===t&&r.handler===e){1===(i=o.splice(n,1)).length&&i[0].listener&&i[0].listener.remove();break}return _r_(this)},setCenter:function(t){return _i_("8d1:cdbb67dd"),this.core.setCenter(i(t)),_r_(this)},hide:function(){return _i_("8d1:d657fbec"),this.core.setVisible(!1),_r_(this)},show:function(){return _i_("8d1:b0b94dfa"),this.core.setVisible(!0),_r_(this)},remove:function(){_i_("8d1:3d69ce10");for(var t,e=o.length;e--;)o[e].context===this&&1===(t=o.splice(e,1)).length&&t[0].listener&&t[0].listener.remove();return this.core.setMap(null),_r_(this)}},_r_({Circle:t})}),B.atlas.define("provider-google-events",function(t,e,r){"use strict";return _i_("8d1:5cffc639"),_r_({setEvents:function(){_i_("8d1:64b2ae3b");var t,e=google.maps.event,r=this.ubber,i=!0,n=0;e.addListener(this.map,"drag",function(){_i_("8d1:4b350abd"),r.trigger(r.EVENTS.DRAG),_r_()}),e.addListener(this.map,"dragstart",function(){_i_("8d1:4987ef98"),r.trigger("drag-start"),_r_()}),e.addListener(this.map,"dragend",function(){_i_("8d1:cf15fe86"),r.trigger("drag-end"),_r_()}),e.addListener(this.map,"zoom_changed",function(){_i_("8d1:0ab0d649");var t=r.Interface,e=t&&t.map?t.map.getZoom():0;r.trigger("zoom",e,i),r.trigger("zoomV2",{topic:"zoomV2",firstTime:i,value:e,zoomCounter:++n}),i=!1,_r_()}),e.addListener(this.map,"dblclick",function(){_i_("8d1:e05551fb"),r.trigger("doubleclick"),_r_()}),e.addListener(this.map,"click",function(){_i_("8d1:190d2657"),r.trigger("click",arguments[0]),_r_()}),e.addListener(this.map,"idle",function(){_i_("8d1:cbc5bb16"),r.trigger("idle"),_r_()}),e.addListener(this.map,"resize",function(){_i_("8d1:f8d5f1d5"),r.trigger("resize"),_r_()}),e.addListener(this.map,"bounds_changed",function(){_i_("8d1:b33443d2"),t&&clearTimeout(t),t=setTimeout(function(){_i_("8d1:40c2845d"),r.trigger("bounds-change"),_r_()},150),r.trigger("view-changed"),_r_()}),e.addListener(this.map,"tilesloaded",function(){_i_("8d1:669b7942"),r.trigger("tiles-loaded"),_r_()}),e.addListener(this.map,"maptypeid_changed",function(){_i_("8d1:ba17ebd9"),r.trigger("google-map-type-change",this.getMapTypeId()),_r_()}),_r_()}})}),B.atlas.define("provider-google-iw",function(){"use strict";_i_("8d1:e996abd3");var l=B.require("jquery"),o="iw-overlay",_="iw-overlay-closing";function t(t,e){_i_("8d1:7fd06db4");var r=e.Interface.map;this.ubber=e,this.config={},this.isOpen=!1,google.maps.OverlayView.call(this),l.extend(this.config,t),l.extend(this,new google.maps.OverlayView),this.setMap(r),this.defer=l.Deferred(),_r_()}return t.prototype.remove=function(){_i_("8d1:b12b056e"),this.$domNode&&(this.$domNode.remove(),this.$domNode=null),this.setMap(null),_r_()},t.prototype.draw=function(){_i_("8d1:39817335");var e=this,t=this.config,r=t.isFixed?this.ubber.$domNode:l(this.getPanes().floatPane);this.$domNode?!t.isFixed&&this.isOpen&&this.setPosition():(this.$domNode=l('<div class="'+o+'"/>'),this.$domNode.appendTo(r).bind("mousemove",function(t){_i_("8d1:2ad458e5"),t.stopPropagation(),_r_()}).on("click",t.closeSelector,function(t){_i_("8d1:6110d206"),t.stopPropagation(),e.close(),_r_()}),this.open()),this.defer.resolve(this.$domNode),_r_()},t.prototype.checkOverlay=function(t,e){_i_("8d1:9bbac88d");var r=this.ubber.get("topOverlay"),i=r||this.ubber.$domNode,n=this.getPanes().floatPane;t&&e.get(0)!==i.get(0)?e.appendTo(i):t||e.get(0)===n||e.appendTo(l(n)),_r_()},t.prototype.open=function(t,e){_i_("8d1:6c2d49d6");var r=l.extend(this.config,t||{}),i=[o,r.className],n=this.$domNode;if(!this.getProjection()||!this.$domNode)return _r_();this.$domNode.removeClass(_),this.checkOverlay(r.isFixed,n),e&&i.push("iw-overlay-loading"),n.attr("class",i.join(" ")).html(r.content).show(),this.setPosition(),r.disablePan||this.panMap(),this.isOpen=!0,this.ubber.trigger("iw-open",{$infoWindow:n,property:r.marker?r.marker:{}}),_r_()},t.prototype.getPosition=function(t,e){_i_("8d1:91a3e470");var r=this.config;return _r_({x:e.x+r.offset.x-t.outerWidth()/2,y:e.y+r.offset.y})},t.prototype.setPosition=function(){_i_("8d1:e37d3715");var t,e,r,i=this.config,n=this.$domNode,o=this.getProjection(),_=i.getPosition||this.getPosition,a=new google.maps.LatLng(i.latLng[0],i.latLng[1]);if(!o||!this.$domNode)return _r_();e=o.fromLatLngToDivPixel(a),r=o.fromLatLngToContainerPixel(a),n.css({position:"absolute"}),t=_.call(this,n,e,r),n.css({top:t.y,left:t.x}),_r_()},t.prototype.close=function(){_i_("8d1:ac1433ab"),this.$domNode&&(this.isOpen=!1,this.$domNode.addClass(_),this.$domNode.hide(),this.ubber.trigger("iw-close",this.config)),_r_()},t.prototype.panMap=function(){_i_("8d1:4649513f");var t=this.getMap(),e=this.config,r=l(t.getDiv()),i=this.$domNode,n=r.width(),o=r.height(),_=i.outerWidth()/2,a=i.outerHeight(),s=this.getProjection().fromLatLngToContainerPixel(new google.maps.LatLng(e.latLng[0],e.latLng[1])),d=0,c=0;s.x<-e.offset.x+e.mapPadding+_+e.mapOffset.x?d=s.x+e.offset.x-e.mapPadding-_-e.mapOffset.x:s.x+_+e.offset.x+e.mapPadding>n&&(d=s.x+_+e.offset.x+e.mapPadding-n),s.y<-e.offset.y+e.mapPadding+e.mapOffset.y?c=s.y+e.offset.y-e.mapPadding-e.mapOffset.y:s.y+a+e.offset.y+e.mapPadding>o&&(c=s.y+a+e.offset.y+e.mapPadding-o),0===d&&0===c||t.panBy(d,c),_r_()},_r_({IW:t})}),B.atlas.define("provider-google-markers",["util-array","util-object","provider-google-overlay-marker-v2"],function(t,a,s){"use strict";_i_("8d1:7416ac5a");var d=B.require("promise"),c=B.require("Atlas/provider-google-overlay-marker");return _r_({centerMarker:function(t,e){_i_("8d1:32dbe916");var r=this,i=this.getMarker(t),n=r.map.getProjection();i&&(n?r.map.setCenter(this.getOffsetLatLng(i.getPosition(),e)):r.ubber.once("idle",function(){_i_("8d1:a128407d"),r.map.setCenter(this.getOffsetLatLng(i.getPosition(),e)),_r_()})),_r_()},clearMarker:function(t){_i_("8d1:034d35d1");var e="object"==typeof t?t:this.markersHashWithAtlasId[t];e&&(google.maps.event.clearInstanceListeners(e),e.setMap(null),delete this.markersHash[e.b_id],delete this.markersHashWithAtlasId[e.b_atlas_id]),_r_()},clearMarkers:function(){_i_("8d1:b826c2da"),Object.keys(this.markersHashWithAtlasId).forEach(function(t){_i_("8d1:aa2ae9b6");var e=this.markersHashWithAtlasId[t];this.clearMarker(e),_r_()}.bind(this)),this.markersHash={},this.markersHashWithAtlasId={},_r_()},createMarker:function(t){_i_("8d1:b1c95893");var e,r,i,n=google.maps,o=n.event,_=this.ubber;if(this.getMarker(t.b_atlas_id))return _r_();return t&&t.b_states&&t.b_states.overlay?t.b_v2?(s.init(),e=new s(t,_)):(c.init(),e=new c(a.extend(t,{zIndex:t.zIndex,content:t.content,position:new n.LatLng(t.b_latitude,t.b_longitude),data:t}))):(i={url:(r=t.icon).url,size:new n.Size(r.w,r.h),origin:new n.Point(r.x,r.y)},r.scaleW&&r.scaleH&&(i.scaledSize=new n.Size(r.scaleW,r.scaleH)),void 0!==r.offsetX&&void 0!==r.offsetY&&(i.anchor=new google.maps.Point(r.offsetX,r.offsetY)),(e=new n.Marker(a.extend(t,{zIndex:t.zIndex,position:new n.LatLng(t.b_latitude,t.b_longitude),data:t,icon:i}))).promise=d.resolve(e)),e.setMap(this.map),o.addListener(e,"click",function(t){_i_("8d1:f5d541c8"),t&&"function"==typeof t.preventDefault&&t.preventDefault(),t&&"function"==typeof t.stopPropagation&&t.stopPropagation(),setTimeout(function(){_i_("8d1:35bb36fc"),_.trigger("marker-click",{evt:t,id:this.b_atlas_id,type:this.b_type,latLng:[this.b_latitude,this.b_longitude],data:this}),_r_()}.bind(this),0),_r_()}),o.addListener(e,"mouseover",function(t){_i_("8d1:e9890479"),_.trigger("marker-hover",{evt:t,id:this.b_atlas_id,type:this.b_type,latLng:[this.b_latitude,this.b_longitude],data:this}),_r_()}),o.addListener(e,"mouseout",function(t){_i_("8d1:f9fba63c"),_.trigger("marker-out",{evt:t,id:this.b_atlas_id,type:this.b_type,latLng:[this.b_latitude,this.b_longitude],data:this}),_r_()}),this.markersHash[e.b_id]=e,this.markersHashWithAtlasId[e.b_atlas_id]=e,_r_(e)},setMarkerOptions:function(t,e){_i_("8d1:df480470");var r=this.getMarker(t);r&&r.setOptions(e),_r_()},getMarker:function(t){return _i_("8d1:2a7627be"),_r_(this.markersHashWithAtlasId[t])},getActiveMarkers:function(){var t;_i_("8d1:669f28c6");try{t=Object.keys(this.markersHashWithAtlasId).map(function(t){_i_("8d1:a350ee40");var e=this.markersHashWithAtlasId[t],r={};return Object.keys(e).forEach(function(t){_i_("8d1:6c8c561d"),/(^b_|^latLng)/.test(t)&&(r[t]=e[t]),_r_()}),_r_(r)}.bind(this))}catch(t){var e,r;try{e=t.message,r=t.stack.slice(0,800)}catch(t){}window.onerror("Error in getActiveMarkers: "+e+r,"markers.js",1,1)}return _r_(t||[])},panMarker:function(t,e){_i_("8d1:49d1dea9");var r=this,i=r.map.getProjection(),n=this.getMarker(t);n&&(i?r.map.panTo(r.getOffsetLatLng(n.getPosition(),e)):r.ubber.once("idle",function(){_i_("8d1:5a2482ed"),r.map.panTo(r.getOffsetLatLng(n.getPosition(),e)),_r_()})),_r_()},pruneOutboundedMarkers:function(){_i_("8d1:c8b11089");var r=google.maps.event,i=this.map.getBounds();Object.keys(this.markersHashWithAtlasId).forEach(function(t){_i_("8d1:f538e678");var e=this.markersHashWithAtlasId[t];!i||i.contains(e.getPosition())||e.data.b_persistent||(r.clearInstanceListeners(e),e.setMap(null),delete this.markersHash[e.b_id],delete this.markersHashWithAtlasId[e.b_atlas_id]),_r_()}.bind(this)),_r_()},updateMarkersVisibiliy:function(){_i_("8d1:ff742c25");var r=this.map.getBounds();if(!r)return _r_();Object.keys(this.markersHashWithAtlasId).forEach(function(t){_i_("8d1:e9bed8ad");var e=this.markersHashWithAtlasId[t];e.setVisible(r.contains(e.getPosition())),_r_()}.bind(this)),_r_()},setMarkerType:function(t,e,r){_i_("8d1:05564fd6");var i,n=this.getMarker(t);n&&n.b_states&&n.b_states.overlay?(e.content&&n.setContent(e.content),e.zIndex&&n.setZIndex(e.zIndex)):n&&(n.iconType=r||n.iconType,i={url:e.url,size:new google.maps.Size(e.w,e.h),origin:new google.maps.Point(e.x,e.y)},e.scaleW&&e.scaleH&&(i.scaledSize=new google.maps.Size(e.scaleW,e.scaleH)),void 0!==e.offsetX&&void 0!==e.offsetY&&(i.anchor=new google.maps.Point(e.offsetX,e.offsetY)),n.setOptions({icon:i,zIndex:e.z})),_r_()},animateMarker:function(t,r){_i_("8d1:349e262b");var i,n=this.getMarker(t);if(n&&"function"==typeof n.setAnimation&&({DROP:!0,BOUNCE:!0,1:!0,2:!0}[r]||null===r))return"string"==typeof r?void 0===(i=google.maps.Animation[r])&&(i=null):i=void 0===r?google.maps.Animation.DROP:null,_r_(new d(function(t,e){_i_("8d1:b917b6ab"),n.setAnimation(i),t(),_r_()}));if(n&&n.setMarkerClass)return _r_(new d(function(t,e){_i_("8d1:7b5a74a5"),n.setMarkerClass(r).on("animationend",function(){_i_("8d1:50c1cad7"),t(),_r_()}),_r_()}));_r_()},markersExist:function(){return _i_("8d1:5fc83524"),_r_(0<Object.keys(this.markersHash).length)},getMarkerPosition:function(t){_i_("8d1:0c4c7637");var e,r,i=new google.maps.OverlayView,n=this.getMarker(t);return i.draw=function(){},i.setMap(this.map),(e=i.getProjection())&&n&&(r=e.fromLatLngToContainerPixel(n.getPosition())),i.setMap(null),_r_(r)},getAllMarkersWithAtlasId:function(){return _i_("8d1:d63b1828"),_r_(this.markersHashWithAtlasId)}})}),B.atlas.define("provider-google-offset",["geo.projection"],function(o){"use strict";return _i_("8d1:52d505da"),_r_({getOffsetLatLng:function(t,e){_i_("8d1:d4b0b54d");var r=this.map,i="lat"in t?new google.maps.LatLng(t):new google.maps.LatLng(t[0],t[1]),n=r.getProjection();return e&&(n=o.pointToLatLng(e,r.getZoom()),i=new google.maps.LatLng(i.lat()-n.lat,i.lng()-n.lng)),_r_(i)}})}),B.atlas.define("provider-google-options",function(){"use strict";return _i_("8d1:e7c8d44c"),_r_({hideZoomControl:function(){_i_("8d1:2280bd55"),this.map.setOptions({zoomControl:!1}),_r_()},configZoomControl:function(t,e){_i_("8d1:b3504f52");var r=google.maps.ZoomControlStyle,i=google.maps.ControlPosition;this.map.setOptions({zoomControl:!0,zoomControlOptions:{style:t&&r.hasOwnProperty(t)?r[t]:r.SMALL,position:e&&i.hasOwnProperty(e)?i[e]:i.LEFT_CENTER}}),_r_()},setMapType:function(t){_i_("8d1:18ad29ca");var e=t.toUpperCase(),r=google.maps.MapTypeId;r.hasOwnProperty(e)&&this.map.setMapTypeId(r[e]),_r_()},getMapType:function(){return _i_("8d1:2646c8f0"),_r_(this.map.getMapTypeId())},setMaxZoom:function(t){_i_("8d1:f868e0af"),this.map.setOptions({maxZoom:t}),_r_()},setMinZoom:function(t){_i_("8d1:c1d984f2"),this.map.setOptions({minZoom:t}),_r_()},setZoom:function(t){_i_("8d1:e57b6d17"),this.map.setOptions({zoom:t}),_r_()},getZoom:function(){return _i_("8d1:88f1ec1a"),_r_(this.map.getZoom())},enableScrollwheel:function(){return _i_("8d1:19811914"),_r_(this.map.setOptions({scrollwheel:!0}))},disableScrollwheel:function(){return _i_("8d1:b9465b60"),_r_(this.map.setOptions({scrollwheel:!1}))}})}),B.atlas.define("provider-google-overlay",["util-object","util-array","geo.latLng"],function(i,o,a){"use strict";_i_("8d1:636248a5");var n="map-overlay-",_="map-overlay-rendered";function t(t){_i_("8d1:5eb7eb5b");for(var e=t.options.queue;e.length;)t.render(e.pop());_r_()}function e(t,e){_i_("8d1:0a67159a"),this.options=i.extend({ubber:e,queue:[],items:[],type:"float"},t),i.extend(this,new google.maps.OverlayView),this.setMap(e.Interface.map),_r_()}return e.prototype.onAdd=function(){_i_("8d1:602e6315"),t(this),_r_()},e.prototype.render=function(t){_i_("8d1:205562e8");var e=this.options,r=e.items,i=function(t){_i_("8d1:cb1c78c0");var e=t.domNode;return e||((e=document.createElement("div")).innerHTML=t.content,e.style.position="absolute"),e.id=t.id,e.className=[e.className||"",_].join(" "),_r_(e)}(t||{});return e.overlayNode=e.overlayNode||function(t){_i_("8d1:c01625f4");var e=t.options.type,r=t.getPanes();switch(!0){case"map"===e:return _r_(r.mapPane);case"overlay"===e:return _r_(r.overlayLayer);case"marker"===e:return _r_(r.markerLayer);default:return _r_(r.floatPane)}_r_()}(this),e.overlayNode.appendChild(i),this.position(t,i),r.push({id:t.id,options:t,domNode:i}),"function"==typeof t.resolve&&t.resolve({id:t.id,options:t,domNode:i,Overlay:this}),_r_(t.id)},e.prototype.position=function(t,e){_i_("8d1:234f5c5f");var r,i,n,o=this.getProjection(),_=google.maps;o&&(r=t.coordinates instanceof a?new _.LatLng(t.coordinates.lat,t.coordinates.lng):t.coordinates instanceof _.LatLng?t.coordinates:new _.LatLng(t.coordinates[0],t.coordinates[1]),i=o.fromLatLngToDivPixel(r),n=e.offsetWidth,t.direction?e.style.left=i.x+"px":e.style.left=i.x-n/2+"px",e.style.top=i.y+"px"),_r_()},e.prototype.add=function(t){_i_("8d1:fc62879d");var e=this.options,r=this.options.queue;return t.id=t.id||i.uniqueId(n),e.overlayNode?this.render(t):(t.id=i.uniqueId(n),r.push(t)),_r_(t.id)},e.prototype.remove=function(e){_i_("8d1:5a4a9a10");var t,r,i=this.options.items,n=this.options.overlayNode;-1<(t=o.findIndex(i,function(t){return _i_("8d1:6466a005"),_r_(t.id===e)}))&&(r=i.splice(t,1)[0]),n&&r&&n.contains(r.domNode)&&n.removeChild(r.domNode),_r_()},e.prototype.removeAll=function(){_i_("8d1:137caabb");for(var t,e=this.options.items,r=this.options.overlayNode;r&&e.length;)t=e.pop().domNode,r.contains(t)&&r.removeChild(t);this.options.items=[],_r_()},e.prototype.draw=function(){_i_("8d1:5cc0d5b8");var e=this;t(this),this.options.items.forEach(function(t){_i_("8d1:d16e13b2"),e.position(t.options,t.domNode),_r_()}),_r_()},e.prototype.onRemove=function(){_i_("8d1:1be9e370");for(var t=this.options.items,e=this.options.overlayNode;e&&t.length;)e.removeChild(t.pop().domNode);_r_()},e.prototype.getRenderedItems=function(){return _i_("8d1:a4ea8b76"),_r_(this.options.items)},_r_({Overlay:e})}),B.atlas.define("provider-google-place-util",["util-object","geo.latLng","util-array"],function(n,o,_){"use strict";return _i_("8d1:5c44ba3a"),_r_({transform:function(t){_i_("8d1:b77d667b");var e=t.geometry&&t.geometry.location?t.geometry.location:new google.maps.LatLng(0,0),r=new o(e.lat(),e.lng()),i=t.query||"";return i&&i.types&&(t.type=function(t,e){_i_("8d1:f7d89f12");var r,i="",n=Number.POSITIVE_INFINITY;return _.each(e,function(e){_i_("8d1:2fcaab4d"),-1<(r=_.findIndex(t,function(t){return _i_("8d1:6e81e8b4"),_r_(e===t)}))&&r<n&&(i=t[n=r]),_r_()}),_r_(i)}(t.types||[],i.types)),_r_({id:t.place_id,source:"google",coordinates:r,location:e,data:t})},normalizeMarker:function(t){_i_("8d1:226ae492");var e=google.maps,r=n.extend({position:this.get("location")},t||{}),i=r.icon;return i&&(r.icon={url:i.url,size:new e.Size(i.w,i.h),origin:new e.Point(i.x,i.y)},i.z&&(r.zIndex=i.z)),_r_(r)},setMarkerEvents:function(t){_i_("8d1:ac8d166b");var e=google.maps.event,r=this;e.addListener(t,"click",function(t){_i_("8d1:75767f93"),r.trigger("click",t),_r_()}),e.addListener(t,"mouseover",function(t){_i_("8d1:45e20d69"),r.trigger("mouseover",t),_r_()}),e.addListener(t,"mouseout",function(t){_i_("8d1:f825237d"),r.trigger("mouseout",t),_r_()}),_r_()},setIWEvents:function(t){_i_("8d1:cf36ee66");var e=google.maps.event,r=this;e.addListener(t,"closeclick",function(t){_i_("8d1:c1cd1dad"),r.trigger("close",t),_r_()}),_r_()},getBestImage:function(t,e,r){_i_("8d1:f98cff97");var i,n,o,_=t[0];for(i=0,n=t.length;i<n;++i)if(o=t[i],_.ratio=o.width/o.height,_.maxWidth=Math.ceil(r*_.ratio),_.maxHeight=r,_.maxWidth<e&&(_.maxWidth=e,_.maxHeight=Math.ceil(e/_.ratio)),_.maxWidth<=o.width&&_.maxHeight<=o.height){_=o;break}return _r_(_)}})}),B.atlas.define("provider-google-place",["pubsub","provider-google-place-util","util-object"],function(n,o,_){"use strict";_i_("8d1:71dfd42b");var a=B.require("jquery");function t(t,e){_i_("8d1:1e7ab33d");var r=o.transform(t),i=this;r.atlas=e,r.data&&(r.data.getImage=function(t){return _i_("8d1:a2aa0b36"),_r_(i.getImage.call(i,t))}),_.extend(this,n.call(this)),this.get=function(t){return _i_("8d1:d7cfa9b1"),_r_(t?r[t]:r.data)},this.set=function(t,e){if(_i_("8d1:29f2c368"),t)return r[t]=e,_r_(e);return _r_(void 0)},_r_()}return t.prototype.extend=function(t){return _i_("8d1:c66cba61"),this.set("data",_.extend(this.get("data")||{},t)),_r_(this)},t.prototype.render=function(t){_i_("8d1:85686517"),this.get("atlas").Interface.map?this.renderMarker(t):this.renderHTML(t),this.set("isRendered",!0),_r_()},t.prototype.renderMarker=function(t){_i_("8d1:937ec453");var e=this.get("marker"),r=this.get("atlas").Interface.map,i=google.maps,n=o.normalizeMarker.call(this,t);if(!r)return _r_();e?(e.setOptions(n),e.setMap(r)):((e=new i.Marker(n)).setMap(r),o.setMarkerEvents.call(this,e),this.set("marker",e)),this.set("isRendered",!0),_r_()},t.prototype.renderHTML=function(t){_i_("8d1:e6923115");var e=this.get("$domNode"),r=a(this.get("atlas").get("resultsNode")),i=t.className,n=t.content||"";e?e.html(n):((e=this.set("$domNode",a('<div class="'+i+'"/>'))).html(n),r.append(e)),_r_()},t.prototype.remove=function(){_i_("8d1:2b7d49a2"),this.get("atlas")&&this.get("atlas").Interface.map?this.removeMarker():this.removeHTML(),this.set("isRendered",!1),_r_()},t.prototype.removeMarker=function(){_i_("8d1:d2e5bcb1");var t=this.get("marker");t&&(t.setMap(null),t.set("marker",null)),_r_()},t.prototype.removeHTML=function(){_i_("8d1:864c19e6"),a(this.get("$domNode")).remove(),this.set("$domNode",null),_r_()},t.prototype.getImage=function(t){_i_("8d1:b06f1cc8");var e,r=this.get("data"),i=t?t.width:80,n=t?t.height:80;if(!r||!r.photos||!r.photos.length)return _r_(!1);return e=o.getBestImage(r.photos,i,n),_r_({attribution:e.html_attributions||"",url:e.getUrl(e),width:e.width,height:e.height,layout:1<=e.ratio?"landscape":"portrait"})},t.prototype.getDetails=function(t){_i_("8d1:2e4be19e");var e=this.get("atlas"),r=this.get("id");e.getPlaceDetails({placeId:r},t,this),_r_()},t.prototype.getMarkerConfig=function(t){_i_("8d1:148e5d67");var e,r=this.get("coordinates");return e={b_id:this.get("id"),b_latitude:r.lat,b_longitude:r.lng,data:this.get("data")},_.extend(e,t),_r_(e)},t.prototype.open=function(t){_i_("8d1:d28b260a");var e=this.get("iw"),r=this.get("marker"),i=this.get("atlas").Interface.map,n=_.extend({},t||{});if(!i)return _r_();e?e.setOptions(n):(e=new google.maps.InfoWindow(n),o.setIWEvents.call(this,e),this.set("iw",e)),e&&r&&e.open(i,r),_r_()},t.prototype.close=function(){_i_("8d1:7ba1a5e7");var t=this.get("iw");return _r_(!!t&&t.close())},_r_(t)}),B.atlas.define("google-places",["util-array","geo.latLng","provider-google-place"],function(s,d,c){"use strict";_i_("8d1:e2bace81");var l=B.require("jquery");return _r_({checkPlacesApi:function(){return _i_("8d1:4d438d6a"),_r_(!!(google&&google.maps&&google.maps.places))},getPlacesService:function(){_i_("8d1:6f11de82");var t=this.ubber,e=this.map||t.get("attributionNode");return _r_(t.get("placesService")||t.set("placesService",new google.maps.places.PlacesService(e)))},getPlaceDetails:function(t,e,n){_i_("8d1:1bca6beb");var o=this.ubber,r=this.getPlacesService(),i="object"==typeof e,_={success:i&&e.success?e.success:e,error:i&&e.error?e.error:function(){}};o.trigger("places-details",t),l.get("/gapi_monitor",{type:"places_details"}),r.getDetails(t,function(t,e){_i_("8d1:b3220335");var r,i="fail";e===google.maps.places.PlacesServiceStatus.OK&&t?(r=n instanceof c?n.extend(t):new c(t,o),_.success.call(n||o,r),i="success"):_.error.call(n||o,e,i,t),n&&n.trigger&&n.trigger("place-details-"+i,r),o.trigger("places-details-"+i,r),_r_()}),_r_()},getGeocodeService:function(){_i_("8d1:e93d00bd");var t=this.ubber;return _r_(t.get("GeocodeService")||t.set("GeocodeService",new google.maps.Geocoder))},getGeocodeDetails:function(t,e){_i_("8d1:8f718263");var r=this.ubber,i=this.getGeocodeService(),n="object"==typeof e,o={success:n&&e.success?e.success:e,error:n&&e.error?e.error:function(){}};r.trigger("geocode-details",t),l.get("/gapi_monitor",{type:"geocoding"}),i.geocode(t,function(t,e){_i_("8d1:ba04e763"),e===google.maps.GeocoderStatus.OK&&s.isArray(t)&&t[0]?o.success.call(r,t[0]):o.error.call(r,e,"fail",t),_r_()}),_r_()},searchPlaces:function(n,o,_){_i_("8d1:4828ebde");var a=this.ubber,t=this.getPlacesService();if(a.trigger("places-search",n),!n||!o||!n.location&&!n.bounds)return _r_();n=function(t){_i_("8d1:86227a32");var e,r,i=google.maps,n=t.bounds,o=t.location;return n&&(e=n.getNorthEast(),r=n.getSouthWest(),t.bounds=new i.LatLngBounds(new i.LatLng(r.lat,r.lng),new i.LatLng(e.lat,e.lng))),o instanceof d?t.location=new i.LatLng(o.lat,o.lng):s.isArray(o)&&2===o.length&&(t.location=new i.LatLng(o[0],o[1])),_r_(t)}(n),l.get("/gapi_monitor",{type:"places_nearby_search"}),t.nearbySearch(n,function(t,e,r){var i;_i_("8d1:53ad512f"),t&&e===google.maps.places.PlacesServiceStatus.OK?((i=function(t,i,n){_i_("8d1:4eb79f2e");var o=[],_=n.exclude||[];return s.each(t,function(e){_i_("8d1:64397108");var r=!1;s.each(_,function(t){_i_("8d1:99c7afac"),s.contains(e.types||[],t)&&(r=!0),_r_()}),!r&&e.geometry&&e.geometry.location&&(e.query=n,o.push(new c(e,i))),_r_()}),_r_(o)}(t,a,n))&&i.length&&o.call(_||a,i,r),a.trigger("places-search-success",i,r)):a.trigger("places-search-fail",t),_r_()}),_r_()}})}),B.atlas.define("provider-google-polygons",function(t){"use strict";_i_("8d1:ea6168aa");var o=[];function i(t){return _i_("8d1:0023a43c"),_r_(t.map(function(t){return _i_("8d1:8c475812"),_r_(new google.maps.LatLng(t[0],t[1]))}))}function e(t,e){_i_("8d1:997ff748");var r={};Object.assign(r,t,{paths:i(t.paths),map:e.map}),this.ubber=e,this.core=new google.maps.Polygon(r),_r_()}return e.prototype={setOptions:function(t){_i_("8d1:8ecf8dac");var e={};return t.paths&&(t.paths=i(t.paths)),Object.assign(e,t),this.core.setOptions(e),_r_(this)},getCenter:function(){_i_("8d1:8f0ec61f");var t,e=new google.maps.LatLngBounds;return this.core.getPath().forEach(function(t){_i_("8d1:f3739766"),e.extend(t),_r_()}),t=e.getCenter(),_r_([t.lat(),t.lng()])},on:function(r,i){_i_("8d1:8aac08b9");var n=this;return o.push({context:this,evt:r,handler:i,listener:google.maps.event.addListener(this.core,r,function(t){_i_("8d1:955ef415");var e={};t.latLng&&(e.latLng=[t.latLng.lat(),t.latLng.lng()]),n.ubber.ubber.trigger("polygon-"+r,e),i.call(n,e),_r_()})}),_r_(this)},off:function(t,e){_i_("8d1:b7a5f26b1");for(var r,i,n=o.length;n--;)if((r=o[n]).context===this&&r.evt===t&&r.handler===e){1===(i=o.splice(n,1)).length&&i[0].listener&&i[0].listener.remove();break}return _r_(this)},setPaths:function(t){return _i_("8d1:129aee54"),this.core.setPaths(i(t)),_r_(this)},hide:function(){return _i_("8d1:d657fbec1"),this.core.setVisible(!1),_r_(this)},show:function(){return _i_("8d1:b0b94dfa1"),this.core.setVisible(!0),_r_(this)},remove:function(){_i_("8d1:3d69ce101");for(var t,e=o.length;e--;)o[e].context===this&&1===(t=o.splice(e,1)).length&&t[0].listener&&t[0].listener.remove();return this.core.setMap(null),_r_(this)}},_r_({Polygon:e})}),B.atlas.define("provider-google-style",function(){"use strict";return _i_("8d1:ce905d07"),_r_({setStyle:function(t){_i_("8d1:7d7a58a0"),this.map.setOptions({styles:t}),_r_()}})}),B.atlas.define("provider-google-polyline",function(){return _i_("8d1:d0867954"),_r_({polyLine:function(t){_i_("8d1:d975005c"),new google.maps.Polyline({path:t,geodesic:!0,strokeColor:"#FF0000",strokeOpacity:1,strokeWeight:2}).setMap(this.map),_r_()}})}),B.atlas.define("provider-google-overlay-marker",["util-object"],function(t){"use strict";_i_("8d1:ebf82124");var n=1,o=2,_=3,a=4,s=5,d=6,c=7,l=8,u=9,e=B.require("promise");function r(t){_i_("8d1:ed8f6bcd");var r=this;t=t||{},this._ready=!1,this._dragging=!1,null==t.visible&&(t.visible=!0),null==t.anchor&&(t.anchor=l),this.promise=new e(function(t,e){_i_("8d1:c6f7890c"),google.maps.event.addListener(r,"ready",function(){_i_("8d1:79414f32"),t(this),_r_()}),_r_()}),this.setValues(t),_r_()}function i(){return _i_("8d1:5cb6df4f"),_r_(this.get("visible"))}function f(t){_i_("8d1:1fa9ee6d"),this.set("visible",t),_r_()}function h(){_i_("8d1:c223019d"),this._ready&&(this._markerWrapper.style.display=this.getVisible()?"":"none",this.draw()),_r_()}function p(t){_i_("8d1:d90d8951"),this.set("flat",!!t),_r_()}function g(){_i_("8d1:35ae5afd"),this.get("flat"),_r_()}function m(){_i_("8d1:e7381c74");var t=this._markerContent.offsetWidth;return t!=this.get("width")&&this.set("width",t),_r_(this.get("width"))}function b(){_i_("8d1:9250c4c5");var t=this._markerContent.offsetHeight;return t!=this.get("height")&&this.set("height",t),_r_(this.get("height"))}function y(t){_i_("8d1:e8b40546"),this.set("shadow",t),this.flat_changed(),_r_()}function v(){return _i_("8d1:bcf3d7de"),_r_(this.get("shadow"))}function k(){if(_i_("8d1:d027b400"),!this._ready)return _r_();this._markerWrapper.style.boxShadow=this._markerWrapper.style.webkitBoxShadow=this._markerWrapper.style.mozBoxShadow=this.getFlat()?"":this.getShadow(),_r_()}function w(t){_i_("8d1:b886eabb"),this.set("zIndex",t),_r_()}function L(){return _i_("8d1:f252294a"),_r_(this.get("zIndex"))}function E(){_i_("8d1:0abffc3f"),this.getZIndex()&&this._ready&&(this._markerWrapper.style.zIndex=this.getZIndex()),_r_()}function O(){return _i_("8d1:c78e9805"),_r_(this.get("draggable"))}function S(t){_i_("8d1:94d160fa"),this.set("draggable",!!t),_r_()}function C(){_i_("8d1:34ada5d2"),this._ready&&(this.getDraggable()?this._addDragging(this._markerWrapper):this._removeDragListeners()),_r_()}function M(){return _i_("8d1:5e0b471f"),_r_(this.get("position"))}function x(t){_i_("8d1:3b5523a7"),this.set("position",t),_r_()}function A(){_i_("8d1:cfc58d93"),this.draw(),_r_()}function P(){return _i_("8d1:217fc718"),_r_(this.get("anchor"))}function T(t){_i_("8d1:471892f4"),this.set("anchor",t),_r_()}function I(){_i_("8d1:fdf6de11"),this.draw(),_r_()}function R(t){_i_("8d1:2ffcd8ba");var e,r=document.createElement("DIV");if(r.innerHTML=t,1==r.childNodes.length)return _r_(r.removeChild(r.firstChild));for(e=document.createDocumentFragment();r.firstChild;)e.appendChild(r.firstChild);return _r_(e)}function N(t){if(_i_("8d1:eb736761"),!t)return _r_();for(var e=t.firstChild;e;)t.removeChild(e),e=t.firstChild;_r_()}function D(t){_i_("8d1:23be22ab"),this.set("content",t),_r_()}function W(){return _i_("8d1:45730900"),_r_(this.get("content"))}function j(){if(_i_("8d1:63667756"),!this._markerContent)return _r_();this._removeChildren(this._markerContent);var t=this.getContent();t&&("string"==typeof t&&(t=t.replace(/^\s*([\S\s]*)\b\s*$/,"$1"),t=this._htmlToDocumentFragment(t)),this._markerContent.appendChild(t),google.maps.event.trigger(this,"domready")),this._ready&&this.draw(),_r_()}function V(t){if(_i_("8d1:93f54a26"),!this._ready)return _r_();var e="";navigator.userAgent.indexOf(!0)?("dragging"==t&&(e="-moz-grabbing"),"dragready"==t&&(e="-moz-grab")):"dragready"!=t&&"dragging"!=t||(e="move"),"draggable"==t&&(e="pointer"),this._markerWrapper.style.cursor!=e&&(this._markerWrapper.style.cursor=e),_r_()}function z(t){if(_i_("8d1:11b0a1de"),!this.getDraggable())return _r_();if(!this._dragging){this._dragging=!0;var e=this.getMap();this._mapDraggable=e.get("draggable"),e.set("draggable",!1),this._mouseX=t.clientX,this._mouseY=t.clientY,this._setCursor("dragready"),this._markerWrapper.style.MozUserSelect="none",this._markerWrapper.style.KhtmlUserSelect="none",this._markerWrapper.style.WebkitUserSelect="none",this._markerWrapper.unselectable="on",this._markerWrapper.onselectstart=function(){return _i_("8d1:1135dfc8"),_r_(!1)},this._addDraggingListeners(),google.maps.event.trigger(this,"dragstart")}_r_()}function H(){if(_i_("8d1:b780c036"),!this.getDraggable())return _r_();this._dragging&&(this._dragging=!1,this.getMap().set("draggable",this._mapDraggable),this._mouseX=this._mouseY=this._mapDraggable=null,this._markerWrapper.style.MozUserSelect="",this._markerWrapper.style.KhtmlUserSelect="",this._markerWrapper.style.WebkitUserSelect="j",this._markerWrapper.unselectable="off",this._markerWrapper.onselectstart=function(){},this._removeDraggingListners(),this._setCursor("draggable"),google.maps.event.trigger(this,"dragend"),this.draw()),_r_()}function Z(t){if(_i_("8d1:a9dee0d7"),!this.getDraggable()||!this._dragging)return this.stopDrag(),_r_();var e=this._mouseX-t.clientX,r=this._mouseY-t.clientY,i=parseInt(this._markerWrapper.style.left,10)-e,n=parseInt(this._markerWrapper.style.top,10)-r;this._markerWrapper.style.left=i+"px",this._markerWrapper.style.top=n+"px";var o=this._getOffset(),_=new google.maps.Point(i-o.width,n-o.height),a=this.getProjection();this.setPosition(a.fromDivPixelToLatLng(_)),this._setCursor("dragging"),google.maps.event.trigger(this,"drag"),_r_()}function F(){_i_("8d1:3329ae5a"),this._draggableListner&&(google.maps.event.removeListener(this._draggableListner),delete this._draggableListner),this._setCursor(""),_r_()}function G(t){if(_i_("8d1:db1ebd41"),!t)return _r_();var e=this;this._draggableListner=google.maps.event.addDomListener(t,"mousedown",function(t){_i_("8d1:20634a30"),e.startDrag(t),_r_()}),this._setCursor("draggable"),_r_()}function q(){_i_("8d1:5685b60c");var e=this;this._markerWrapper.setCapture?(this._markerWrapper.setCapture(!0),this._draggableListner=[google.maps.event.addDomListener(this._markerWrapper,"mousemove",function(t){_i_("8d1:3b50214c"),e.drag(t),_r_()},!0),google.maps.event.addDomListener(this._markerWrapper,"mouseup",function(){_i_("8d1:f22fea14"),e.stopDrag(),e._markerWrapper.releaseCapture(),_r_()},!0)]):this._draggingListeners=[google.maps.event.addDomListener(window,"mousemove",function(t){_i_("8d1:3b50214c1"),e.drag(t),_r_()},!0),google.maps.event.addDomListener(window,"mouseup",function(){_i_("8d1:0457b419"),e.stopDrag(),_r_()},!0)],_r_()}function U(){if(_i_("8d1:d885a97d"),this._draggableListner){for(var t=0,e=this._draggableListner[0];e;t++)google.maps.event.removeListener(e),e=this._draggableListner[t];this._draggingListeners.length=0}_r_()}function K(){_i_("8d1:1ef2e7f3");var t=this.getAnchor();if("object"==typeof t)return _r_(t);var e=new google.maps.Size(0,0);if(!this._markerContent)return _r_(e);this._contentHeight&&this._contentWidth||(this._contentHeight=this._markerContent.offsetHeight,this._contentWidth=this._markerContent.offsetWidth);var r=this._contentHeight,i=this._contentWidth;switch(t){case n:break;case o:e.width=-i/2;break;case _:e.width=-i;break;case a:e.height=-r/2;break;case s:e.width=-i/2,e.height=-r/2;break;case d:e.width=-i,e.height=-r/2;break;case c:e.height=-r;break;case l:e.width=-i/2,e.height=-r;break;case u:e.width=-i,e.height=-r}return _r_(e)}function Y(t){_i_("8d1:b94fc2d2");var e=1,r=2;if(!this._markerWrapper)return _r_();t===r?$(this._markerWrapper).addClass("marker-effect-rain").find(".marker-effect-rain-start").removeClass("marker-effect-rain-start"):t===e?$(this._markerWrapper).addClass("marker-effect-bounce").removeClass("marker-effect-rain"):$(this._markerWrapper).removeClass("marker-effect-bounce marker-effect-rain"),_r_()}function X(){if(_i_("8d1:5397577c"),this._markerWrapper||(this._markerWrapper=document.createElement("DIV"),this._markerWrapper.style.position="absolute"),this.getZIndex()&&(this._markerWrapper.style.zIndex=this.getZIndex()),this._markerWrapper.style.display=this.getVisible()?"":"none",!this._markerContent){this._markerContent=document.createElement("DIV"),this._markerWrapper.appendChild(this._markerContent);var e=this;google.maps.event.addDomListener(this._markerContent,"click",function(t){_i_("8d1:0c9bdcb3"),google.maps.event.trigger(e,"click",t),_r_()}),google.maps.event.addDomListener(this._markerContent,"mouseover",function(t){_i_("8d1:795387c5"),google.maps.event.trigger(e,"mouseover",t),_r_()}),google.maps.event.addDomListener(this._markerContent,"mouseout",function(t){_i_("8d1:b55e8ea0"),google.maps.event.trigger(e,"mouseout",t),_r_()}),google.maps.event.addDomListener(this._markerContent,"touchmove",function(t){_i_("8d1:4d506551"),t.preventDefault(),_r_()})}this._ready=!0,this.content_changed(),this.flat_changed(),this.draggable_changed();var t=this.getPanes();t&&t.overlayMouseTarget.appendChild(this._markerWrapper),google.maps.event.trigger(this,"ready"),_r_()}function J(){if(_i_("8d1:342087a0"),!this._ready||this._dragging)return _r_();var t=this.getProjection();if(!t)return _r_();var e=this.get("position"),r=t.fromLatLngToDivPixel(e),i=this._getOffset();this._markerWrapper.style.top=r.y+i.height+"px",this._markerWrapper.style.left=r.x+i.width+"px",_r_()}function Q(){_i_("8d1:c23eebdc"),this._markerContent&&this._markerContent.parentNode&&this._markerContent.parentNode.removeChild(this._markerContent),this._markerWrapper&&this._markerWrapper.parentNode&&this._markerWrapper.parentNode.removeChild(this._markerWrapper),this._removeDraggingListners(),_r_()}function tt(t){return _i_("8d1:f0ce4549"),_r_($(this._markerContent).find("div:first").addClass(t))}function et(t){return _i_("8d1:deeb9b7e"),_r_($(this._markerContent).find("div:first").removeClass(t))}function rt(t){return _i_("8d1:6cf2d48a"),_r_($(this._markerContent).find("div:first").attr("class",t))}return r.init=function(){if(_i_("8d1:1f54cef9"),r._isInitialized)return _r_();r.prototype=new google.maps.OverlayView,t.extend(r.prototype,{getVisible:i,setVisible:f,visible_changed:h,setFlat:p,getFlat:g,getWidth:m,getHeight:b,setShadow:y,getShadow:v,flat_changed:k,setZIndex:w,getZIndex:L,zIndex_changed:E,getDraggable:O,setDraggable:S,draggable_changed:C,getPosition:M,setPosition:x,position_changed:A,getAnchor:P,setAnchor:T,anchor_changed:I,_htmlToDocumentFragment:R,_removeChildren:N,setContent:D,getContent:W,content_changed:j,_setCursor:V,startDrag:z,stopDrag:H,drag:Z,_removeDragListeners:F,_addDragging:G,_addDraggingListeners:q,_removeDraggingListners:U,_getOffset:K,onAdd:X,draw:J,onRemove:Q,setOptions:function(t){_i_("8d1:a456ec63");var e={pointer:"pointer",move:"move",default:"default"};t.cursor&&e[t.cursor]&&this._ready&&(this._markerWrapper.style.cursor=e[t.cursor],delete t.cursor),this.setValues(t),_r_()},setAnimation:Y,setMarkerClass:tt,removeMarkerClass:et,overrideMarkerClasses:rt}),r._isInitialized=!0,_r_()},_r_(r)}),B.define("Atlas/provider-google-overlay-marker-v2",function(t,e,r){_i_("8d1:b838461c");var i=t("promise"),n=t("morphdom");function o(t,e){_i_("8d1:5803e2bc"),this._ready=!1,t.latLng?this.position=new google.maps.LatLng(t.latLng):t.hasOwnProperty("b_latitude")&&t.hasOwnProperty("b_longitude")&&(this.position=new google.maps.LatLng(t.b_latitude,t.b_longitude)),this.data=t,this.b_id=t.b_id,this.b_atlas_id=t.b_atlas_id,this.b_type=this.type=t.b_type,this.atlas=e,this.promise=new i(function(t,e){_i_("8d1:4d64e479"),google.maps.event.addListener(this,"ready",function(){_i_("8d1:e5176563"),t(this),_r_()}),_r_()}.bind(this)),_r_()}var _={onAdd:function(){_i_("8d1:6c973463");var t=this.getPanes(),e=this.data.b_template.render?this.data.b_template:this.atlas.jstmpl(this.data.b_template);this._markerContainer=document.createElement("DIV"),google.maps.event.addDomListener(this._markerContainer,"click",function(t){_i_("8d1:dd0f0345"),google.maps.event.trigger(this,"click",t),_r_()}.bind(this)),google.maps.event.addDomListener(this._markerContainer,"mouseover",function(t){_i_("8d1:46145630"),google.maps.event.trigger(this,"mouseover",t),_r_()}.bind(this)),google.maps.event.addDomListener(this._markerContainer,"mouseout",function(t){_i_("8d1:36e5f70a"),google.maps.event.trigger(this,"mouseout",t),_r_()}.bind(this)),this._markerContainer.innerHTML=e.render(this.data),t.overlayMouseTarget.appendChild(this._markerContainer),this._ready=!0,google.maps.event.trigger(this,"ready"),_r_()},draw:function(){_i_("8d1:f2643309");var t=this.getProjection().fromLatLngToDivPixel(this.position),e=-this.data.width/2,r=-this.data.height,i=this.data.clickMargin||0,n="position: absolute;left: "+(t.x+e-i)+"px;top: "+(t.y+r-i)+"px;";this.data.dropMarker&&"hotel"===this.data.b_basic_type&&!this.data.dropMarkerDone&&(n+="display: none;",setTimeout(function(){_i_("8d1:625ad7f5"),this._markerContainer.style.display="block",this._markerContainer.classList.add("marker-effect-rain"),this.atlas.updateMarker(this.data.b_atlas_id,{dropMarkerDone:!0}),_r_()}.bind(this),Math.floor(1e3*Math.random()))),this.data.zIndex&&(n+="z-index:"+this.data.zIndex+";"),this.cssString!==n&&(this._markerContainer.style.cssText=n),this.cssString=n,_r_()},getPosition:function(){return _i_("8d1:6d4dd263"),_r_(this.position||this.data.position)},onRemove:function(){_i_("8d1:836e6c12"),this._markerContainer&&this._markerContainer.parentNode.removeChild(this._markerContainer),_r_()},customUpdate:function(t){_i_("8d1:a40384ed"),Object.assign(this.data,t);var e=this.data.b_template.render?this.data.b_template:this.atlas.jstmpl(this.data.b_template);if(!this._ready)return _r_();1===this._markerContainer.children.length&&n&&n(this._markerContainer.children[0],e.render(this.data).trim()),this.draw(),_r_()},setOptions:function(t){_i_("8d1:1329523a"),this.customUpdate.call(this,t),_r_()},setZIndex:function(t){},setVisible:function(t){}};return o.init=function(){if(_i_("8d1:24c9ada3"),o._isInitialized)return _r_();o.prototype=new google.maps.OverlayView,Object.assign(o.prototype,_),o._isInitialized=!0,_r_()},_r_(o)}),B.define("Atlas/provider-google-directions",function(t,e,r){"use strict";_i_("8d1:e42cc132");return _r_({directionsService:function(){return _i_("8d1:4affa891"),this._directionsService||(this._directionsService=new google.maps.DirectionsService),_r_(this._directionsService)},directionsRenderer:function(t){return _i_("8d1:705f22fd"),this._directionsRenderer?(this._directionsRenderer.setOptions(t),null===this._directionsRenderer.getMap()&&this._directionsRenderer.setMap(this.map)):(this._directionsRenderer=new google.maps.DirectionsRenderer(t),this._directionsRenderer.setMap(this.map)),_r_(this._directionsRenderer)},directionsServiceRoute:function(t,e){return _i_("8d1:7f8df76e"),Array.isArray(t.origin)&&(t.origin=new google.maps.LatLng(t.origin[0],t.origin[1])),Array.isArray(t.destination)&&(t.destination=new google.maps.LatLng(t.destination[0],t.destination[1])),Array.isArray(t.waypoints)&&(t.waypoints=t.waypoints.map(function(t){return _i_("8d1:6e01d4cb"),Array.isArray(t.location)&&(t.location=new google.maps.LatLng(t.location[0],t.location[1])),_r_(t)})),_r_(this.directionsService().route(t,e))}})}),B.atlas.define("provider-google-transit-layer",function(){"use strict";function t(t,e){_i_("8d1:4e3c2509"),this.map=e.map,this.transitLayer=new google.maps.TransitLayer(t),_r_()}return _i_("8d1:dc1c03a4"),t.prototype={add:function(){_i_("8d1:2660befe"),this.transitLayer.setMap(this.map),_r_()},remove:function(){_i_("8d1:10d8729e"),this.transitLayer.setMap(null),_r_()},setOptions:function(t){_i_("8d1:8b65298b"),this.transitLayer.setOptions(t),_r_()}},_r_({TransitLayer:t})}),B.atlas.define("provider-google",["provider-loader-v2","provider-google-events","provider-google-markers","provider-google-bounds","provider-google-center","provider-google-options","provider-google-offset","provider-google-polygons","provider-google-circles","google-places","provider-google-overlay","provider-google-autocomplete","provider-google-style","provider-google-directions","provider-google-transit-layer","provider-google-polyline","provider-google-iw"],function(n,_,t,e,r,i,o,a,s,d,c,l,u,f,h,p,g){"use strict";_i_("8d1:ddbd60a4");var m=!1,b=B.require("promise"),y=B.require("jquery");function v(t,e){_i_("8d1:40307623"),this.markersHash={},this.markersHashWithAtlasId={};var r,i=google.maps,n=y(t.domNode).get(0),o={zoom:t.zoom,center:Array.isArray(t.center)?new i.LatLng(t.center[0],t.center[1]):t.center,styles:e.STYLES||t.styles||[],mapTypeControl:!t.hasOwnProperty("mapTypeControl")||t.mapTypeControl,maxZoom:t.maxZoom||20,minZoom:t.minZoom||1,streetViewControl:t.streetView||!1,mapTypeId:t.mapTypeId?t.mapTypeId:i.MapTypeId.ROADMAP,panControl:!t.hasOwnProperty("panControl")||t.panControl,zoomControl:!t.hasOwnProperty("zoomControl")||t.zoomControl,scaleControl:!t.hasOwnProperty("scaleControl")||t.scaleControl,scrollwheel:!t.hasOwnProperty("scrollwheel")||t.scrollwheel,clickableIcons:!t.hasOwnProperty("clickableIcons")||t.clickableIcons,panControlOptions:{position:t.hasOwnProperty("panPosition")&&i.ControlPosition.hasOwnProperty(t.panPosition)?i.ControlPosition[t.panPosition]:i.ControlPosition.TOP_LEFT},zoomControlOptions:{style:t.hasOwnProperty("zoomStyle")&&i.ZoomControlStyle.hasOwnProperty(t.zoomStyle)?i.ZoomControlStyle[t.zoomStyle]:i.ZoomControlStyle.DEFAULT,position:t.hasOwnProperty("zoomPosition")&&i.ControlPosition.hasOwnProperty(t.zoomPosition)?i.ControlPosition[t.zoomPosition]:i.ControlPosition.TOP_LEFT},mapTypeControlOptions:{position:t.hasOwnProperty("mapTypePosition")&&i.ControlPosition.hasOwnProperty(t.mapTypePosition)?i.ControlPosition[t.mapTypePosition]:i.ControlPosition.TOP_RIGHT,mapTypeIds:(r=t.mapTypes,_i_("8d1:a9aa4f2c"),_r_(r instanceof Array&&r))},gestureHandling:t.hasOwnProperty("gestureHandling")?t.gestureHandling:"greedy",fullscreenControl:!!t.hasOwnProperty("fullscreenControl")&&t.gestureHandling};e.set("minZoom",o.minZoom),e.set("maxZoom",o.maxZoom),t.boundingBox&&Object.assign(o,e.defineBounds(t.boundingBox,n)),i.visualRefresh=!0,this.ubber=e,this.map=new i.Map(n,o),_.setEvents.call(this),_r_()}function k(){_i_("8d1:554dfbbf"),this.bounds=new google.maps.LatLngBounds,_r_()}return k.prototype.extend=function(t){_i_("8d1:5cd9b554"),this.bounds.extend(new google.maps.LatLng(t[0],t[1])),_r_()},Object.assign(v.prototype,t,e,r,i,o,a,s,d,c,l,u,f,h,p,g,{Bounds:k,fitBounds:function(t,e){_i_("8d1:eed9630b"),t instanceof google.maps.LatLngBounds||(Array.isArray(t.sw)&&Array.isArray(t.ne)&&(t.sw=new google.maps.LatLng(t.sw[0],t.sw[1]),t.ne=new google.maps.LatLng(t.ne[0],t.ne[1])),t=new google.maps.LatLngBounds(t.sw,t.ne)),this.map.fitBounds(t,e),_r_()},coordsToPixels:function(t){_i_("8d1:44fe9482");var e=Math.pow(2,this.map.getZoom()),r=this.map.getProjection(),i=this.map.getBounds(),n=new google.maps.LatLng(i.getNorthEast().lat(),i.getSouthWest().lng()),o=r.fromLatLngToPoint(n),_=new google.maps.LatLng(t[0],t[1]),a=r.fromLatLngToPoint(_);return _r_({x:(a.x-o.x)*e,y:(a.y-o.y)*e})},getContainer:function(){return _i_("8d1:c8279d18"),_r_(this.map.getDiv())},getPanes:function(){return _i_("8d1:4971d6b8"),_r_(new b(function(t){_i_("8d1:40aaf00b");var e=function(t){_i_("8d1:089bee5b"),this.setMap(t),_r_()};(e.prototype=new google.maps.OverlayView).onAdd=function(){_i_("8d1:372eb78b"),t(this.getPanes()),_r_()},new e(this.map),_r_()}.bind(this)))},fromLatLngToPoint:function(t){return _i_("8d1:0c0e2fb0"),t instanceof google.maps.LatLng||(t=new google.maps.LatLng(t)),_r_(this.map.getProjection().fromLatLngToPoint(t))},fromPointToLatLng:function(t){return _i_("8d1:b9b74e92"),_r_(this.map.getProjection().fromPointToLatLng(t))},createPoint:function(t,e){return _i_("8d1:90bcb4f1"),_r_(new google.maps.Point(t,e))},createLatLngBounds:function(t,e){return _i_("8d1:d5a09ebf"),t instanceof google.maps.LatLng||(t=new google.maps.LatLng(t)),e instanceof google.maps.LatLng||(e=new google.maps.LatLng(e)),_r_(new google.maps.LatLngBounds(t,e))},setMapTypeId:function(t){return _i_("8d1:3223cc37"),_r_(this.map.setMapTypeId(t))}}),_r_({init:function(t,e,r){_i_("8d1:5e28b671");var i=e.googleApiUrl||B.require("Atlas/util-env").get("googleMapsUrl");if(!m)return _r_(new n(i,t,"google").then(function(){_i_("8d1:d117d3d1"),m=!0,r(new v(e,t)),_r_()}));r(new v(e,t)),_r_()}})});