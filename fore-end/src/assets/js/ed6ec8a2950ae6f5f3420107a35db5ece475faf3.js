var _i_=this._i_||function(){},_r_=this._r_||function(t){return t};B.define("component/dealspage-campaign-countdown",function(t,e,n){"use strict";_i_("854:71433eed");var i=t("component");n.exports=i.extend({init:function(){_i_("854:e3c787c3"),this.timeInterval=null,this.mode=this.$el.data("mode"),this.maxDays=this.$el.data("max-days"),this.countdownDaysCopy=this.$el.data("countdown-days-copy"),this.countdownTimeCopy=this.$el.data("countdown-time-copy");var t=this.$el.data("end-timestamp");t?(this.endTimestamp=new Date(t.split(" ").join("T")).getTime(),this.startCountdown()):this.updateElement(0),_r_()},startCountdown:function(){_i_("854:3a30b7cb"),this.updateCountdown(),this.timeInterval=setInterval(this.updateCountdown.bind(this),1e3),_r_()},stopTimer:function(){_i_("854:71dbded2"),clearInterval(this.timeInterval),this.timeInterval=null,_r_()},updateCountdown:function(){_i_("854:88f1b79e");var t=this.endTimestamp-Date.now();t<=0?(this.stopTimer(),this.updateElement(0)):this.updateElement(t),_r_()},updateElement:function(t){var e;_i_("854:50eaeeeb");var n=Math.floor(t/864e5),i={hours:Math.floor(t/36e5),minutes:Math.floor(t/1e3/60%60),seconds:Math.floor(t/1e3%60)};switch(this.mode){case"days-time":e=n<this.maxDays?this.getUpdatedTimeCopy(i):this.getUpdatedDaysCopy(n);break;case"time":default:e=this.getUpdatedTimeCopy(i)}this.$el.html(e),_r_()},getUpdatedDaysCopy:function(t){return _i_("854:0dc2b4c7"),_r_(B.jstmpl.translations(this.countdownDaysCopy,t,{num_days:t}))},getUpdatedTimeCopy:function(t){_i_("854:bc47d7d7");var e=[t.hours,this.padLeft(t.minutes),this.padLeft(t.seconds)].join(":");return _r_(B.jstmpl.translations(this.countdownTimeCopy,null,{countdown:e}))},padLeft:function(t){if(_i_("854:60c1c38f"),t<10)return _r_("0"+t);return _r_(t)}}),_r_()});